<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.1 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Terrain - ljf12825’s Blog</title>
<meta name="description" content="在Unity中，Terrain是一个专门用于制作大规模、自然风格场景的强大工具">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="ljf12825's Blog">
<meta property="og:title" content="Terrain">
<meta property="og:url" content="http://localhost:4000/%E7%AC%94%E8%AE%B0/2025/06/01/Terrain.html">


  <meta property="og:description" content="在Unity中，Terrain是一个专门用于制作大规模、自然风格场景的强大工具">







  <meta property="article:published_time" content="2025-06-01T00:00:00+08:00">






<link rel="canonical" href="http://localhost:4000/%E7%AC%94%E8%AE%B0/2025/06/01/Terrain.html">












<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="ljf12825's Blog Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <!-- favicon -->
<link rel="icon" href="/assets/images/favicon.ico" type="image/x-icon">

  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          ljf12825's Blog
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/"
                
                
              >Home</a>
            </li><li class="masthead__menu-item">
              <a
                href="/categories/"
                
                
              >Categories</a>
            </li><li class="masthead__menu-item">
              <a
                href="/tags/"
                
                
              >Tags</a>
            </li><li class="masthead__menu-item">
              <a
                href="/about/"
                
                
              >About</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Terrain">
    <meta itemprop="description" content="在Unity中，Terrain是一个专门用于制作大规模、自然风格场景的强大工具">
    <meta itemprop="datePublished" content="2025-06-01T00:00:00+08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="http://localhost:4000/%E7%AC%94%E8%AE%B0/2025/06/01/Terrain.html" itemprop="url">Terrain
</a>
          </h1>
          


        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>在Unity中，Terrain是一个专门用于制作大规模、自然风格场景的强大工具</p>

<h2 id="什么是terrain">什么是Terrain</h2>
<p>Terrain是Unity提供的一个内置组件，用于在场景中创建可编辑的地形<br />
它由多个部分组成：</p>
<ul>
  <li>地形本体（高度图控制的网格）</li>
  <li>纹理涂层（地表材质贴图）</li>
  <li>植被/树木/草</li>
  <li>光照支持（光照贴图、探针）</li>
  <li>LOD和剔除</li>
</ul>

<h2 id="terrain的核心结构">Terrain的核心结构</h2>

<table>
  <thead>
    <tr>
      <th>模块</th>
      <th>功能</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>高度图（Heightmap）</strong></td>
      <td>决定地形的高低起伏</td>
    </tr>
    <tr>
      <td><strong>绘制材质（Layers）</strong></td>
      <td>地面纹理（如草地、岩石、雪）混合涂刷</td>
    </tr>
    <tr>
      <td><strong>细节对象（Details）</strong></td>
      <td>草、石头、花等低多边形细节（大量渲染优化）</td>
    </tr>
    <tr>
      <td><strong>树木系统（Trees）</strong></td>
      <td>批量放置支持 LOD 的树</td>
    </tr>
    <tr>
      <td><strong>碰撞体</strong></td>
      <td>自动生成地形碰撞</td>
    </tr>
    <tr>
      <td><strong>光照支持</strong></td>
      <td>支持烘焙光照图、Light Probe、反射探针</td>
    </tr>
  </tbody>
</table>

<h2 id="terrain-in-inspector">Terrain in Inspector</h2>
<p>场景中的Terrain对象一般会包含以下模块</p>
<ul>
  <li>Terrain（主组件）</li>
  <li>Terrain Collider（自动附加）</li>
  <li>Terrain Tools（各种绘制工具）</li>
  <li>Terrain Settings（参数设置）</li>
</ul>

<h3 id="create-neighbor-terrains">Create Neighbor Terrains</h3>
<p><img src="/assets/images/CreateNeighborTerrains.jpg" alt="CreateNeighborTerrains" /></p>

<h4 id="这是什么">这是什么</h4>
<p>Unity的每一个Terrain是一个地形快（chunk），当你需要构建更大的世界地图时：</p>
<blockquote>
  <p>你可以将多个地形快拼接在一起，形成一个无缝连接的大地图
<code class="language-plaintext highlighter-rouge">Create Neighbor Terrains</code>就是一个快捷工具，让你快速在上下左右形成新的Terrain，并自动设置它们之间的连接关系（Neighbor）</p>
</blockquote>

<h4 id="unity会做什么">Unity会做什么</h4>
<ul>
  <li>自动创建一个或多个相邻的Terrain GameObject</li>
  <li>与当前的Terrain无缝拼接（边界贴合）</li>
  <li>自动设置每个地形的Neighbor引用（主要用于LOD过渡等）</li>
</ul>

<p><img src="/assets/images/TerrainNeighbor.jpg" alt="TerrainsNeighbor" /></p>

<h4 id="创建后的terrain有哪些特征">创建后的Terrain有哪些特征</h4>
<ul>
  <li>分辨率与当前Terrain一致</li>
  <li>初始高度图为空白</li>
  <li>材质/Detail Layer/树/Layer并不会自动继承，需要手动复制</li>
  <li>已经自动设置了<code class="language-plaintext highlighter-rouge">SetNeighbor</code>（Unity会在内部管理连接信息）</li>
</ul>

<h4 id="为什么需要neighbor信息">为什么需要Neighbor信息</h4>
<p>Unity Terrain在运行时做：</p>
<ul>
  <li>LOD边界融合（避免接缝）</li>
  <li>光照探针插值正确性</li>
  <li>寻路/NavMesh分布</li>
</ul>

<p>也就是说，如果你手动创建了多个Terrain，没有设置Neighbor，会出现：</p>
<ul>
  <li>LOD切换时断裂</li>
  <li>光照贴图不连续</li>
  <li>草树渲染突然中断</li>
</ul>

<h4 id="tips">Tips</h4>
<p>多Terrain的场景通常配合：</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">Streaming</code>（按需加载块）</li>
  <li><code class="language-plaintext highlighter-rouge">Runtime Stitching</code>（连接边界）
可以使用插件如MicroSplat/Gaia等进行多地形管理</li>
</ul>

<h3 id="paintterrain">PaintTerrain</h3>
<p><img src="/assets/images/PaintTerrain.jpg" alt="PaintTerrain" /></p>

<p>这是Unity Terrain系统用于手动“绘制”地形的工具，类似PS中的笔刷，但是用于三维地形，可以用它来：</p>
<ul>
  <li>提升/降低地形</li>
  <li>涂抹纹理（比如：草、图、雪）</li>
  <li>铺设草和石头（Detail）</li>
  <li>放置树木（Tree）</li>
  <li>设置材质混合</li>
  <li>创建地形孔洞（如山洞入口）</li>
</ul>

<h4 id="sub-tools">Sub Tools</h4>
<h5 id="1raise-or-lower-terrain">1.Raise or Lower Terrain</h5>
<blockquote>
  <p>用笔刷将地形向上或向下推动</p>
  <ul>
    <li>Bursh Size：笔刷大小（影响范围）</li>
    <li>Opacity：强度（提升速度）</li>
    <li>Target Strength：单次推拉的力量</li>
    <li>可用于画山、丘陵、平原</li>
  </ul>
</blockquote>

<p>配合<code class="language-plaintext highlighter-rouge">Shift</code>反向操作</p>

<h5 id="2set-height">2.Set Height</h5>
<blockquote>
  <p>把地形调整到某个统一的高度（例如建平台）</p>
  <ul>
    <li>设置<code class="language-plaintext highlighter-rouge">Target Height</code>，然后绘制地形</li>
    <li>适合制作建筑平台、河面、平地道路</li>
  </ul>
</blockquote>

<p>可以使用<code class="language-plaintext highlighter-rouge">Flatten</code>一键铺平当前Terrain</p>

<h5 id="3smooth-height平滑地形">3.Smooth Height（平滑地形）</h5>
<blockquote>
  <p>平滑地形的高低差，让地形更自然</p>
  <ul>
    <li>常用于锐利山峰边缘平滑处理</li>
    <li>减少单位移动时的突兀感</li>
  </ul>
</blockquote>

<h5 id="4paint-texture涂地表材质">4.Paint Texture（涂地表材质）</h5>
<blockquote>
  <p>把不同纹理“画”到地形上，实现草地、雪地、沙漠的混合过渡</p>
  <ul>
    <li>每个纹理时一个Terrain Layer</li>
    <li>Unity支持多图混合（最多8张）</li>
    <li>使用笔刷方式混合地表纹理</li>
  </ul>
</blockquote>

<p>示例层：</p>
<ul>
  <li>Layer1：Grass</li>
  <li>Layer2：Dirt</li>
  <li>Layer3：Rock</li>
</ul>

<p>支持自定义笔刷、混合过渡控制（Opacity）<br />
<code class="language-plaintext highlighter-rouge">Add Layer</code>添加纹理层，选用PBR材质（支持BaseMap、NormalMap）</p>

<h5 id="5terrain-holes">5.Terrain Holes</h5>
<blockquote>
  <p>画出洞，让地形有缺口（可用于洞穴、地道入口）</p>
  <ul>
    <li>类似“橡皮擦”，直接擦掉地形面片</li>
    <li>可用于：
      <ul>
        <li>做地下世界入口</li>
        <li>配合Portal、Volume、Trigger使用
默认不可通过地形下看见，需要你手动铺地板或连接其他网格模型</li>
      </ul>
    </li>
  </ul>
</blockquote>

<h3 id="paint-trees">Paint Trees</h3>
<p><img src="/assets/images/PaintTrees.jpg" alt="PaintTrees" /></p>

<p><code class="language-plaintext highlighter-rouge">Paint Trees</code>是Unity Terrain中用于批量种植树木的工具，它支持使用不同树模型的自动随机分布、缩放、选择、LOD显示等，是创建森林、山地植被的关键工具</p>
<h4 id="添加树模型">添加树模型</h4>
<p>点击 “Edit Trees” → “Add Tree…”：</p>
<ul>
  <li>在弹出的窗口中选择一个 树的 Prefab</li>
  <li>Unity 支持：
    <ul>
      <li>Tree Creator 制作的树（.tree 文件）</li>
      <li>SpeedTree 模型（.spm 文件）</li>
      <li>自己导入的 FBX/Prefab 模型（需带有 LOD/Collider）</li>
    </ul>
  </li>
</ul>

<p>要求：</p>
<ul>
  <li>树不能有刚体或Animator</li>
  <li>树Prefab中必须包含Mesh Renderer（或SpeedTree）</li>
</ul>

<h4 id="种树参数设置">种树参数设置</h4>
<p>添加好树之后，就可以开始“画树”了，主要参数如下：</p>

<table>
  <thead>
    <tr>
      <th>参数</th>
      <th>作用</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Brush Size</strong></td>
      <td>控制笔刷直径（影响范围）</td>
    </tr>
    <tr>
      <td><strong>Tree Density</strong></td>
      <td>控制单位面积内种植的数量</td>
    </tr>
    <tr>
      <td><strong>Tree Height/Width</strong></td>
      <td>控制树的缩放范围（有最小和最大）</td>
    </tr>
    <tr>
      <td><strong>Color Variation</strong></td>
      <td>控制颜色的随机扰动（偏红、偏绿、偏亮等）</td>
    </tr>
    <tr>
      <td><strong>Random Rotation</strong></td>
      <td>勾选后自动随机 Y 轴旋转树（防止重复感）</td>
    </tr>
  </tbody>
</table>

<p>每画一次，就会在当前区域根据密度、大小、颜色等参数生成多个树</p>

<h4 id="树木渲染和性能优化">树木渲染和性能优化</h4>
<p>Unity的Terrain树有专门的渲染优化方案</p>
<h5 id="billboard看板树">Billboard（看板树）</h5>
<ul>
  <li>当树距离相机较远时，自动变成平面图片</li>
  <li>极大减少了远距离渲染负担</li>
</ul>

<h5 id="lod支持">LOD支持</h5>
<ul>
  <li>使用SpeedTree模型或LOD Group的树可自动切换模型精度</li>
  <li>可自定义LOD阶段</li>
</ul>

<h5 id="gpu-instancing">GPU Instancing</h5>
<ul>
  <li>大量相同的树会使用GPU Instancing批处理渲染</li>
  <li>极大提高性能，适合森林、大面积自然场景</li>
</ul>

<h4 id="树的碰撞">树的碰撞</h4>
<p>默认树时没有碰撞器的，但你可以启用碰撞</p>
<ul>
  <li>勾选<code class="language-plaintext highlighter-rouge">Tree Collider</code>（取决于添加的树的prefab）</li>
  <li>或者在Runtime中为某些特殊树添加<code class="language-plaintext highlighter-rouge">Capsule Collider</code>等</li>
</ul>

<p>适用于：</p>
<ul>
  <li>玩家可以撞到树</li>
  <li>砍树系统</li>
  <li>遮挡判断</li>
</ul>

<h4 id="几种树的比较">几种树的比较</h4>

<table>
  <thead>
    <tr>
      <th>工具</th>
      <th>特点</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Tree Creator</strong></td>
      <td>Unity 内置的老式树编辑器，支持风、LOD，效率不高，（2022版本已弃用）</td>
    </tr>
    <tr>
      <td><strong>SpeedTree</strong></td>
      <td>高级树木生成工具，效果好，适合中大型项目（但是商业插件）</td>
    </tr>
    <tr>
      <td><strong>普通 Prefab 树</strong></td>
      <td>自己做的 FBX + LOD，灵活但需优化得当</td>
    </tr>
    <tr>
      <td><strong>Terrain 树</strong></td>
      <td>专为大量地形种树优化，性能最佳但不支持动画/刚体</td>
    </tr>
  </tbody>
</table>

<p><img src="/assets/images/PaintDetails.jpg" alt="PaintDetails" />
<img src="/assets/images/TerrainSetting_1.jpg" alt="TerrainSetting_1" />
<img src="/assets/images/TerrainSetting_2.jpg" alt="TerrainSetting_2" /></p>

<h2 id="terrain-lod-编写调优">Terrain LOD 编写/调优</h2>

<h2 id="terrain-gpu-instancing草树渲染优化">Terrain GPU Instancing（草、树渲染优化）</h2>

<h2 id="使用terrain-toolkit插件或gaia等地形生成工具">使用Terrain Toolkit插件或Gaia等地形生成工具</h2>

<h2 id="多地形拼接无缝过渡">多地形拼接、无缝过渡</h2>

<h2 id="结合导航烘焙navmesh--terrain">结合导航烘焙（NavMesh + Terrain）</h2>

<h2 id="runtime地形修改voxel地形破坏">Runtime地形修改（Voxel、地形破坏）</h2>

<h2 id="terrain-api">Terrain API</h2>


        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2025-06-01T00:00:00+08:00">June 1, 2025</time></p>

      </footer>

      

      
  <nav class="pagination">
    
      <a href="/%E7%AC%94%E8%AE%B0/2025/06/01/Navigation.html" class="pagination--pager" title="Navigation System">Previous</a>
    
    
      <a href="/%E7%AC%94%E8%AE%B0/2025/06/01/TileMap.html" class="pagination--pager" title="TileMap">Next</a>
    
  </nav>


    </div>

    
  </article>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://github.com/ljf12825" rel="nofollow noopener noreferrer"><i class="fab fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2025 <a href="http://localhost:4000">ljf12825's Blog</a>. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/jekyll-themes/minimal-mistakes/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
