<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.1 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Input System - ljf12825’s Blog</title>
<meta name="description" content="Unity目前存在新旧两个输入系统，旧输入系统（Input类）和新输入系统（Input System包）">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="ljf12825's Blog">
<meta property="og:title" content="Input System">
<meta property="og:url" content="http://localhost:4000/%E7%AC%94%E8%AE%B0/2025/06/01/Input-System.html">


  <meta property="og:description" content="Unity目前存在新旧两个输入系统，旧输入系统（Input类）和新输入系统（Input System包）">







  <meta property="article:published_time" content="2025-06-01T00:00:00+08:00">






<link rel="canonical" href="http://localhost:4000/%E7%AC%94%E8%AE%B0/2025/06/01/Input-System.html">












<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="ljf12825's Blog Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <!-- favicon -->
<link rel="icon" href="/assets/images/favicon.ico" type="image/x-icon">

  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          ljf12825's Blog
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/"
                
                
              >Home</a>
            </li><li class="masthead__menu-item">
              <a
                href="/categories/"
                
                
              >Categories</a>
            </li><li class="masthead__menu-item">
              <a
                href="/tags/"
                
                
              >Tags</a>
            </li><li class="masthead__menu-item">
              <a
                href="/about/"
                
                
              >About</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Input System">
    <meta itemprop="description" content="Unity目前存在新旧两个输入系统，旧输入系统（Input类）和新输入系统（Input System包）">
    <meta itemprop="datePublished" content="2025-06-01T00:00:00+08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="http://localhost:4000/%E7%AC%94%E8%AE%B0/2025/06/01/Input-System.html" itemprop="url">Input System
</a>
          </h1>
          


        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>Unity目前存在新旧两个输入系统，旧输入系统（Input类）和新输入系统（Input System包）</p>

<h2 id="unity旧输入系统unityengineinput">Unity旧输入系统（UnityEngine.Input）</h2>

<p>这是Unity默认内建的输入方式，无配置即可用，使用非常直观，主要通过静态类<code class="language-plaintext highlighter-rouge">Input</code>获取各种输入信息</p>
<ul>
  <li>适合快速开发与小型项目</li>
  <li>不支持热插拔和玩家映射</li>
  <li>键盘/鼠标输入最简单最稳定</li>
  <li>建议仅在不考虑复杂输入要求的项目中使用</li>
</ul>

<h3 id="键盘输入">键盘输入</h3>
<p>基本方法：</p>
<div class="language-cs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Input</span><span class="p">.</span><span class="nf">GetKey</span><span class="p">(</span><span class="n">KeyCode</span><span class="p">.</span><span class="n">X</span><span class="p">);</span> <span class="c1">//判断某键是否按住</span>
<span class="n">Input</span><span class="p">.</span><span class="nf">GetKeyDown</span><span class="p">(</span><span class="n">KeyCode</span><span class="p">.</span><span class="n">X</span><span class="p">);</span> <span class="c1">// 是否按下（只触发一帧）</span>
<span class="n">Input</span><span class="p">.</span><span class="nf">GetKeyUp</span><span class="p">(</span><span class="n">KeyCode</span><span class="p">.</span><span class="n">X</span><span class="p">)</span><span class="n">l</span> <span class="c1">// 是否刚抬起</span>
</code></pre></div></div>
<blockquote>
  <p><code class="language-plaintext highlighter-rouge">KeyCode</code>是一个枚举，表示各种键盘和鼠标按键</p>
</blockquote>

<h3 id="鼠标输入">鼠标输入</h3>
<p>鼠标按钮</p>
<div class="language-cs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Input</span><span class="p">.</span><span class="nf">GetMouseButton</span><span class="p">(</span><span class="kt">int</span> <span class="n">button</span><span class="p">);</span>      <span class="c1">// 0左键，1右键，2中键</span>
<span class="n">Input</span><span class="p">.</span><span class="nf">GetMouseButtonDown</span><span class="p">(</span><span class="kt">int</span> <span class="n">button</span><span class="p">);</span>
<span class="n">Input</span><span class="p">.</span><span class="nf">GetMouseButtonUp</span><span class="p">(</span><span class="kt">int</span> <span class="n">button</span><span class="p">);</span>
</code></pre></div></div>
<p>鼠标位置和滚轮</p>
<div class="language-cs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Vector3</span> <span class="n">mousePos</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="n">mousePosition</span><span class="p">;</span>    <span class="c1">// 屏幕坐标</span>
<span class="kt">float</span> <span class="n">scrollDelta</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="n">mouseScrollDelta</span><span class="p">.</span><span class="n">y</span><span class="p">;</span> <span class="c1">// 滚轮滑动</span>
</code></pre></div></div>

<h3 id="触摸屏输入touch">触摸屏输入（Touch）</h3>
<p>移动端专用，支持多点触控</p>
<div class="language-cs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="n">count</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="n">touchCount</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="n">count</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">Touch</span> <span class="n">touch</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="nf">GetTouch</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>
    <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="n">touch</span><span class="p">.</span><span class="n">position</span><span class="p">);</span> <span class="c1">// 屏幕坐标</span>
    <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="n">touch</span><span class="p">.</span><span class="n">phase</span><span class="p">);</span> <span class="c1">// Began, Moved, Stationary, Ended, Cancled</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="虚拟轴input-manager">虚拟轴（Input Manager）</h3>
<p>通过Unity的<code class="language-plaintext highlighter-rouge">Project Setting -&gt; Input Manager</code>设置，可实现跨平台控制<br />
它允许你用统一的名字来访问不同平台或设备上的输入<br />
通过`Input.GetAxis(“Horizontal”)获取的是一个“横向控制”的抽象值，不需要关心是按了哪个具体按键或移动了哪个摇杆</p>
<div class="language-cs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">float</span> <span class="n">h</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="nf">GetAxis</span><span class="p">(</span><span class="s">"Horizontal"</span><span class="p">);</span> <span class="c1">// A/D 或 左/右</span>
<span class="kt">float</span> <span class="n">v</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="nf">GetAxis</span><span class="p">(</span><span class="s">"Vertical"</span><span class="p">);</span> <span class="c1">// W/S 或 上/下</span>

<span class="kt">float</span> <span class="n">raw</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="nf">GetAxisRaw</span><span class="p">(</span><span class="s">"Horizontal"</span><span class="p">);</span> <span class="c1">//不经过平滑处理</span>
</code></pre></div></div>

<p>常用默认名称列表</p>

<table>
  <thead>
    <tr>
      <th>名称</th>
      <th>类型</th>
      <th>默认映射键</th>
      <th>描述</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Horizontal</code></td>
      <td>轴</td>
      <td>A/D 键、←/→键、手柄左摇杆</td>
      <td>左右移动轴，范围 -1 到 1</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Vertical</code></td>
      <td>轴</td>
      <td>W/S 键、↑/↓键、手柄左摇杆</td>
      <td>上下移动轴，范围 -1 到 1</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Fire1</code></td>
      <td>按钮</td>
      <td>Ctrl、鼠标左键、手柄 A 键</td>
      <td>攻击、射击等</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Fire2</code></td>
      <td>按钮</td>
      <td>Alt、鼠标右键、手柄 B 键</td>
      <td>次要攻击、取消</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Fire3</code></td>
      <td>按钮</td>
      <td>Shift、鼠标中键、手柄 X 键</td>
      <td>冲刺或特殊技能</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Jump</code></td>
      <td>按钮</td>
      <td>空格键、手柄 Y 键</td>
      <td>跳跃</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Mouse X</code></td>
      <td>轴</td>
      <td>鼠标横向移动</td>
      <td>相机/视角横向旋转</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Mouse Y</code></td>
      <td>轴</td>
      <td>鼠标纵向移动</td>
      <td>相机/视角纵向旋转</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Mouse ScrollWheel</code></td>
      <td>轴</td>
      <td>鼠标滚轮上下滚动</td>
      <td>放大缩小、切换武器等</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Submit</code></td>
      <td>按钮</td>
      <td>Enter、手柄 A 键</td>
      <td>UI确认</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Cancel</code></td>
      <td>按钮</td>
      <td>Escape、手柄 B 键</td>
      <td>UI取消</td>
    </tr>
  </tbody>
</table>

<h3 id="手柄支持旧系统的有限支持">手柄支持（旧系统的有限支持）</h3>
<p>手柄也通过虚拟轴或<code class="language-plaintext highlighter-rouge">KeyCode.JoystickButton0</code>等访问，但：</p>
<ul>
  <li>设备不通用，配置复杂</li>
  <li>不支持手柄热插拔</li>
  <li>不支持多个玩家分开处理</li>
</ul>

<h2 id="unity新输入系统input-system-package">Unity新输入系统（Input System Package）</h2>
<p>Unity为了解决旧系统的局限，引入了新输入系统，是一个模块化、可配置、支持多设备的专业输入方案</p>

<h3 id="核心概念">核心概念</h3>
<p><strong>Input System</strong>包
你需要在Unity的Package Manager中安装<code class="language-plaintext highlighter-rouge">Input System</code>包</p>

<p><strong>与旧系统的对比</strong></p>

<table>
  <thead>
    <tr>
      <th>对比项</th>
      <th>旧系统（Input Manager）</th>
      <th>新系统（Input System）</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>支持设备</td>
      <td>键鼠、手柄（有限）</td>
      <td>键鼠、手柄、触控、移动传感器等</td>
    </tr>
    <tr>
      <td>输入模式</td>
      <td>较为被动，基于轮询</td>
      <td>支持事件、轮询、回调</td>
    </tr>
    <tr>
      <td>自定义操作</td>
      <td>不支持</td>
      <td>强大的 Action Map 系统</td>
    </tr>
    <tr>
      <td>多玩家支持</td>
      <td>手动管理</td>
      <td>内建支持玩家输入分离</td>
    </tr>
    <tr>
      <td>绑定方式</td>
      <td>硬编码字符串</td>
      <td>数据驱动 Asset 绑定</td>
    </tr>
  </tbody>
</table>

<h3 id="关键组成">关键组成</h3>
<p><strong>Input Action（输入动作）</strong><br />
核心概念是“输入动作”，它是抽象层，将具体按键与游戏行为解耦<br />
例如：Jump动作绑定Space键、Gamepad A键<br />
你可以创建一个<code class="language-plaintext highlighter-rouge">.inputactions</code>文件来集中管理动作映射</p>

<p><strong>Action Map</strong><br />
是Input Action的集合，例如：</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">Player</code>：Move、Jump、Fire</li>
  <li><code class="language-plaintext highlighter-rouge">UI</code>：Navigate、Click、Cancel</li>
</ul>

<p><strong>控制方案</strong>
用于支持不同设备类型的输入方案，如：</p>
<ul>
  <li>Keyboard&amp;Mouse</li>
  <li>Gamepad</li>
  <li>Touch</li>
</ul>

<h3 id="使用流程常规项目">使用流程（常规项目）</h3>

<ul>
  <li>安装 Input System
打开 Package Manager
安装 Input System 包
Unity 会提示是否启用新的输入系统（可双系统兼容）</li>
  <li>创建 .inputactions 文件
Assets -&gt; Create -&gt; Input Actions
配置 Action Maps、Actions、Bindings</li>
  <li>生成 C# 类
勾选 Generate C# Class
命名生成的类，如 PlayerInputActions.cs</li>
  <li>在代码中使用
    <div class="language-cs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">PlayerController</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
  <span class="k">private</span> <span class="n">PlayerInputActions</span> <span class="n">inputActions</span><span class="p">;</span>

  <span class="k">private</span> <span class="k">void</span> <span class="nf">Awake</span><span class="p">()</span> <span class="p">=&gt;</span> <span class="n">inputActions</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PlayerInputActions</span><span class="p">();</span>

  <span class="k">private</span> <span class="k">void</span> <span class="nf">OnEnable</span><span class="p">()</span>
  <span class="p">{</span>
      <span class="n">inputActions</span><span class="p">.</span><span class="nf">Enable</span><span class="p">();</span>
      <span class="n">inputActions</span><span class="p">.</span><span class="n">Player</span><span class="p">.</span><span class="n">Jump</span><span class="p">.</span><span class="n">performed</span> <span class="p">+=</span> <span class="n">OnJump</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">private</span> <span class="k">void</span> <span class="nf">OnDisable</span><span class="p">()</span>
  <span class="p">{</span>
      <span class="n">inputActions</span><span class="p">.</span><span class="nf">Disable</span><span class="p">();</span>
      <span class="n">inputActions</span><span class="p">.</span><span class="n">Player</span><span class="p">.</span><span class="n">Jump</span><span class="p">.</span><span class="n">performed</span> <span class="p">-=</span> <span class="n">OnJump</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">private</span> <span class="k">void</span> <span class="nf">OnJump</span><span class="p">(</span><span class="n">InputAction</span><span class="p">.</span><span class="n">CallbackContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="s">"Jump!"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <h3 id="配合playerinput组件">配合PlayerInput组件</h3>
    <p><code class="language-plaintext highlighter-rouge">PlayerInput</code>是Unity提供的MonoBehaviour，用于快速接入<code class="language-plaintext highlighter-rouge">.inputactions</code>资产，支持：</p>
  </li>
  <li>自动绑定事件</li>
  <li>自动识别控制器</li>
  <li>支持多玩家分离（Join/Leave）
    <div class="language-cs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">void</span> <span class="nf">OnMove</span><span class="p">(</span><span class="n">InputValue</span> <span class="k">value</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">Vector2</span> <span class="n">move</span> <span class="p">=</span> <span class="k">value</span><span class="p">.</span><span class="n">Get</span><span class="p">&lt;</span><span class="n">Vector2</span><span class="p">&gt;();</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="事件类型">事件类型</h3>

<table>
  <thead>
    <tr>
      <th>类型</th>
      <th>描述</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">started</code></td>
      <td>按下的那一帧</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">performed</code></td>
      <td>动作生效（按住、滑动）</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">canceled</code></td>
      <td>动作取消（松开、停止滑动）</td>
    </tr>
  </tbody>
</table>

<h3 id="实用技巧">实用技巧</h3>
<p><strong>动态绑定</strong></p>
<div class="language-cs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">inputActions</span><span class="p">.</span><span class="n">Player</span><span class="p">.</span><span class="n">Fire</span><span class="p">.</span><span class="n">start</span> <span class="p">+=</span> <span class="n">ctx</span> <span class="p">=&gt;</span> <span class="nf">Shoot</span><span class="p">();</span>
</code></pre></div></div>

<p><strong>支持UI操作</strong>
Unity的<code class="language-plaintext highlighter-rouge">Input System UI Input Module</code>替代源EventSystem，需绑定Input Actions到UI</p>

<p><strong>多人输入管理</strong></p>
<ul>
  <li>配合<code class="language-plaintext highlighter-rouge">PlayerInputManager</code></li>
  <li>支持热插拔、多设备控制</li>
</ul>

        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2025-06-01T00:00:00+08:00">June 1, 2025</time></p>

      </footer>

      

      
  <nav class="pagination">
    
      <a href="/%E7%AC%94%E8%AE%B0/2025/06/01/Gizmos.html" class="pagination--pager" title="Gizmos">Previous</a>
    
    
      <a href="/posts/2025-06-03-Physics-System/" class="pagination--pager" title="Physics System">Next</a>
    
  </nav>


    </div>

    
  </article>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://github.com/ljf12825" rel="nofollow noopener noreferrer"><i class="fab fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2025 <a href="http://localhost:4000">ljf12825's Blog</a>. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/jekyll-themes/minimal-mistakes/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
