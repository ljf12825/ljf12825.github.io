<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.1 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Interface Oriented Design - ljf12825’s Blog</title>
<meta name="description" content="“Interface Oriented Design”面向接口设计，是软件架构中的一种重要思想，它强调通过接口而非具体实现进行编程">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="ljf12825's Blog">
<meta property="og:title" content="Interface Oriented Design">
<meta property="og:url" content="http://localhost:4000/posts/2025-07-15-Interface-Oriented-Design/">


  <meta property="og:description" content="“Interface Oriented Design”面向接口设计，是软件架构中的一种重要思想，它强调通过接口而非具体实现进行编程">







  <meta property="article:published_time" content="2025-06-01T00:00:00+08:00">






<link rel="canonical" href="http://localhost:4000/posts/2025-07-15-Interface-Oriented-Design/">












<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="ljf12825's Blog Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <!-- favicon -->
<link rel="icon" href="/assets/images/favicon.ico" type="image/x-icon">

  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          ljf12825's Blog
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/"
                
                
              >Home</a>
            </li><li class="masthead__menu-item">
              <a
                href="/categories/"
                
                
              >Categories</a>
            </li><li class="masthead__menu-item">
              <a
                href="/tags/"
                
                
              >Tags</a>
            </li><li class="masthead__menu-item">
              <a
                href="/about/"
                
                
              >About</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Interface Oriented Design">
    <meta itemprop="description" content="“Interface Oriented Design”面向接口设计，是软件架构中的一种重要思想，它强调通过接口而非具体实现进行编程">
    <meta itemprop="datePublished" content="2025-06-01T00:00:00+08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="http://localhost:4000/posts/2025-07-15-Interface-Oriented-Design/" itemprop="url">Interface Oriented Design
</a>
          </h1>
          


        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>“Interface Oriented Design”面向接口设计，是软件架构中的一种重要思想，它强调通过接口而非具体实现进行编程</p>

<p>在Unity中，面向接口设计不仅有助于降低耦合、增强可测试性，还在组件化开发、热更架构、解耦系统中发挥了非常关键的作用</p>

<blockquote>
  <p>定义行为接口，让对象只依赖接口而不是具体实现，从而实现解耦、扩展与测试的灵活性</p>
</blockquote>

<h2 id="unity中的典型应用场景">Unity中的典型应用场景</h2>

<ul>
  <li>控制系统分离：<code class="language-plaintext highlighter-rouge">IInputHandler</code>抽象输入，无论是键盘、手柄还是虚拟按钮都统一处理</li>
  <li>热更系统对接：ILRuntime、HybridCLR下通过接口对热更代码调用，避免直接依赖反射</li>
  <li>AI行为系统：<code class="language-plaintext highlighter-rouge">IState</code>、<code class="language-plaintext highlighter-rouge">ITask</code>、<code class="language-plaintext highlighter-rouge">ICondition</code>组合行为树模块</li>
  <li>资源加载系统：<code class="language-plaintext highlighter-rouge">IAssetLoader</code>抽象出不同加载器(Resources、Addressables、AB)</li>
  <li>游戏流程系统：<code class="language-plaintext highlighter-rouge">IGameState</code>,<code class="language-plaintext highlighter-rouge">IFlowNode</code>构建状态流、任务流</li>
  <li>特效触发系统：<code class="language-plaintext highlighter-rouge">ITrigger</code>,<code class="language-plaintext highlighter-rouge">IEffectReceiver</code>解耦触发与响应</li>
</ul>

<h2 id="interface的几个核心特性">Interface的几个核心特性</h2>
<ul>
  <li>明确定义“行为契约”</li>
  <li>不依赖具体类，从而实现松耦合</li>
  <li>便于单元测试（可用mock实现）</li>
  <li>可实现多态性与模块化组合</li>
  <li>更适合插件式、模块式开发</li>
</ul>

<h2 id="示例输入控制器的面向接口设计">示例：输入控制器的面向接口设计</h2>
<p><strong>定义接口</strong></p>
<div class="language-cs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">interface</span> <span class="nc">IInputHandler</span>
<span class="p">{</span>
    <span class="n">Vector2</span> <span class="nf">GetMoveInput</span><span class="p">();</span>
    <span class="kt">bool</span> <span class="nf">IsJumpPressed</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>
<p><strong>两种实现方式</strong></p>
<div class="language-cs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">KeyboardInput</span> <span class="p">:</span> <span class="n">IInputHandler</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">Vector2</span> <span class="nf">GetMoveInput</span><span class="p">()</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="nf">GetAxis</span><span class="p">(</span><span class="s">"Horizontal"</span><span class="p">),</span> <span class="n">Input</span><span class="p">.</span><span class="nf">GetAxis</span><span class="p">(</span><span class="s">"Vertical"</span><span class="p">));</span>
    <span class="k">public</span> <span class="kt">bool</span> <span class="nf">IsJumpPressed</span><span class="p">()</span> <span class="p">=&gt;</span> <span class="n">Input</span><span class="p">.</span><span class="nf">GetKeyDown</span><span class="p">(</span><span class="n">KeyCode</span><span class="p">.</span><span class="n">Space</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">MobileInput</span> <span class="p">:</span> <span class="n">IInputHandler</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">Vector2</span> <span class="nf">GetMoveInput</span><span class="p">()</span> <span class="p">=&gt;</span> <span class="n">joystick</span><span class="p">.</span><span class="n">Direction</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">bool</span> <span class="nf">IsJumpPressed</span><span class="p">()</span> <span class="p">=&gt;</span> <span class="n">jumpButton</span><span class="p">.</span><span class="n">IsPressed</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
<p><strong>游戏角色逻辑只依赖接口</strong></p>
<div class="language-cs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">PlayerController</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">IInputHandler</span> <span class="n">input</span><span class="p">;</span>

    <span class="k">void</span> <span class="nf">Update</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">Vector2</span> <span class="n">move</span> <span class="p">=</span> <span class="n">input</span><span class="p">.</span><span class="nf">GetMoveInput</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="nf">IsJumpPressed</span><span class="p">())</span> <span class="nf">Jump</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>这样就可以轻松替换不同输入源，而无需修改<code class="language-plaintext highlighter-rouge">PlayerController</code>的任何逻辑</p>

<h2 id="示例子弹造成伤害">示例：子弹造成伤害</h2>
<div class="language-cs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">interface</span> <span class="nc">IDamageable</span>
<span class="p">{</span>
    <span class="k">void</span> <span class="nf">TakeDamage</span><span class="p">(</span><span class="kt">int</span> <span class="n">amount</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">Enemy</span> <span class="p">:</span> <span class="n">MonoBehaviour</span><span class="p">,</span> <span class="n">IDamageable</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">TakeDamage</span><span class="p">(</span><span class="kt">int</span> <span class="n">amount</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="s">$"Enemy took </span><span class="p">{</span><span class="n">amount</span><span class="p">}</span><span class="s"> damage."</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">Bullet</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">void</span> <span class="nf">OnCollisionEnter</span><span class="p">(</span><span class="n">Collision</span> <span class="n">collision</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">damageable</span> <span class="p">=</span> <span class="n">collision</span><span class="p">.</span><span class="n">gameObject</span><span class="p">.</span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">IDamageable</span><span class="p">&gt;();</span>
        <span class="n">damageable</span><span class="p">?.</span><span class="nf">TakeDamage</span><span class="p">(</span><span class="m">10</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>Bullet不关心对象是不是Enemy，只在乎能不能被“伤害”</p>

<p>优点：</p>
<ol>
  <li>
    <p>松耦合
接口使得组件之间的耦合性降到最低。<code class="language-plaintext highlighter-rouge">Bullet</code>类并不知道<code class="language-plaintext highlighter-rouge">Enemy</code>类的实现细节，它只关心<code class="language-plaintext highlighter-rouge">Enemy</code>是否实现了<code class="language-plaintext highlighter-rouge">IDamageable</code>接口。这使得组件之间可以灵活地进行替换和扩展</p>
  </li>
  <li>
    <p>可扩展性
如果以后需要增加新的可伤害对象，只需要让新的类实现<code class="language-plaintext highlighter-rouge">IDamageable</code>接口，而不需要修改已有的<code class="language-plaintext highlighter-rouge">Enemy</code>类</p>
  </li>
  <li>
    <p>可维护性
当项目需要调整某些行为时，接口提供了一个良好的抽象层。例如，如果要改变<code class="language-plaintext highlighter-rouge">Bullet</code>伤害计算方式，只需要修改<code class="language-plaintext highlighter-rouge">Bullet</code>类，而不需要影响到其他类的交互</p>
  </li>
  <li>
    <p>灵活性
接口可以被用作插件或模块化系统的基础。比如，游戏中有多个物品类型，它们都可能具有被攻击的行为。可以创建一个<code class="language-plaintext highlighter-rouge">IDamageable</code>接口，让这些物品实现不同的伤害逻辑，而不需要知道具体类型</p>
  </li>
</ol>

<h2 id="unity中面向接口设计的典型架构模式">Unity中面向接口设计的典型架构模式</h2>

<table>
  <thead>
    <tr>
      <th>模式</th>
      <th>与接口结合点</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>策略模式 (Strategy)</strong></td>
      <td>定义一组策略接口，如 <code class="language-plaintext highlighter-rouge">IMovementStrategy</code>, <code class="language-plaintext highlighter-rouge">ISkillStrategy</code></td>
    </tr>
    <tr>
      <td><strong>状态模式 (State)</strong></td>
      <td>定义 <code class="language-plaintext highlighter-rouge">IState</code>, 例如 <code class="language-plaintext highlighter-rouge">IdleState</code>, <code class="language-plaintext highlighter-rouge">AttackState</code>，用于 FSM 或流程控制</td>
    </tr>
    <tr>
      <td><strong>事件发布订阅</strong></td>
      <td><code class="language-plaintext highlighter-rouge">IEventListener&lt;T&gt;</code>，订阅不同类型事件</td>
    </tr>
    <tr>
      <td><strong>服务定位器 (Service Locator)</strong></td>
      <td>注册与获取 <code class="language-plaintext highlighter-rouge">IService</code> 接口实例</td>
    </tr>
    <tr>
      <td><strong>依赖注入 (DI)</strong></td>
      <td>将接口作为依赖注入类中，提升模块解耦性</td>
    </tr>
  </tbody>
</table>

<h2 id="interface-oriented-vs-inheritance-oriented">Interface Oriented vs Inheritance Oriented</h2>

<table>
  <thead>
    <tr>
      <th>特性</th>
      <th>面向接口</th>
      <th>面向继承</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>耦合度</td>
      <td>低（只依赖接口）</td>
      <td>高（依赖具体类）</td>
    </tr>
    <tr>
      <td>多重继承</td>
      <td>支持</td>
      <td>C# 只支持单继承</td>
    </tr>
    <tr>
      <td>可测试性</td>
      <td>高</td>
      <td>一般</td>
    </tr>
    <tr>
      <td>扩展性</td>
      <td>强</td>
      <td>受限于父类设计</td>
    </tr>
    <tr>
      <td>Unity 中建议</td>
      <td>优先接口</td>
      <td>谨慎继承 MonoBehaviour</td>
    </tr>
  </tbody>
</table>

<h2 id="建议">建议</h2>
<ol>
  <li>尽量避免直接在逻辑中引用MonoBehaviour类
    <ul>
      <li>改为<code class="language-plaintext highlighter-rouge">interface + bridge</code>结构组合</li>
    </ul>
  </li>
  <li>构建模块接口层
    <ul>
      <li>如<code class="language-plaintext highlighter-rouge">ISoundSystem</code>,<code class="language-plaintext highlighter-rouge">IResourceSystem</code>,<code class="language-plaintext highlighter-rouge">IGameFlowSystem</code>等</li>
    </ul>
  </li>
  <li>
    <p>配合ScriptableObject实现运行时数据配置</p>
  </li>
  <li>配合依赖注入容器实现自动绑定</li>
</ol>

        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2025-06-01T00:00:00+08:00">June 1, 2025</time></p>

      </footer>

      

      
  <nav class="pagination">
    
      <a href="/posts/2025-07-15-Game-Architecture/" class="pagination--pager" title="Game Architecture">Previous</a>
    
    
      <a href="/posts/2025-07-15-Loose-Coupling/" class="pagination--pager" title="Loose Coupling">Next</a>
    
  </nav>


    </div>

    
  </article>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://github.com/ljf12825" rel="nofollow noopener noreferrer"><i class="fab fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2025 <a href="http://localhost:4000">ljf12825's Blog</a>. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/jekyll-themes/minimal-mistakes/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
