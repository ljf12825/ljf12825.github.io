<!doctype html><html lang=en><head><meta charset=UTF-8><title>Input System</title><link rel=stylesheet href=/css/style.css><link href=https://cdn.jsdelivr.net/npm/prismjs@1/themes/prism-tomorrow.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/prismjs@1/prism.js></script><script src=https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-csharp.min.js></script><script src=https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-cpp.min.js></script><script src=https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-json.min.js></script><script src=https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-bash.min.js></script><script src=https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-text.min.js></script><script src=https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-ini.min.js></script><script src=https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-c.min.js></script><link rel=stylesheet href=/css/blogsingle.css></head><body><header><title>How to Develop a Game</title><div class=container><img src=/images/gamelife.jpg alt="Input System" class=banner></div></header><nav class=topnav><div class=container><ul><li><a href=/>Home</a></li><li><a href=/article/>Article</a></li><li><a href=/blog/>Blog</a></li><li><a href=/projects/>Projects</a></li><li><a href=/tool/>Tool & Resource</a></li><li><a href=/reference/>Reference</a></li><li><a href=/about/>About</a></li></ul></div></nav><article class=single_article><div class=title>Input System<div class=meta>PublishDate: 2025-06-01 |
CreateDate: 2025-06-01 |
LastModify: 2025-06-01
| Creator：ljf12825</div></div><div class=content><p>Unity目前存在新旧两个输入系统，旧输入系统（Input类）和新输入系统（Input System包）</p><h2 id=unity旧输入系统unityengineinput>Unity旧输入系统（UnityEngine.Input）</h2><p>这是Unity默认内建的输入方式，无配置即可用，使用非常直观，主要通过静态类<code>Input</code>获取各种输入信息</p><ul><li>适合快速开发与小型项目</li><li>不支持热插拔和玩家映射</li><li>键盘/鼠标输入最简单最稳定</li><li>建议仅在不考虑复杂输入要求的项目中使用</li></ul><h3 id=键盘输入>键盘输入</h3><p>基本方法：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cs data-lang=cs><span style=display:flex><span>Input.GetKey(KeyCode.X); <span style=color:#75715e>//判断某键是否按住</span>
</span></span><span style=display:flex><span>Input.GetKeyDown(KeyCode.X); <span style=color:#75715e>// 是否按下（只触发一帧）</span>
</span></span><span style=display:flex><span>Input.GetKeyUp(KeyCode.X)l <span style=color:#75715e>// 是否刚抬起</span>
</span></span></code></pre></div><blockquote><p><code>KeyCode</code>是一个枚举，表示各种键盘和鼠标按键</p></blockquote><h3 id=鼠标输入>鼠标输入</h3><p>鼠标按钮</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cs data-lang=cs><span style=display:flex><span>Input.GetMouseButton(<span style=color:#66d9ef>int</span> button);      <span style=color:#75715e>// 0左键，1右键，2中键</span>
</span></span><span style=display:flex><span>Input.GetMouseButtonDown(<span style=color:#66d9ef>int</span> button);
</span></span><span style=display:flex><span>Input.GetMouseButtonUp(<span style=color:#66d9ef>int</span> button);
</span></span></code></pre></div><p>鼠标位置和滚轮</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cs data-lang=cs><span style=display:flex><span>Vector3 mousePos = Input.mousePosition;    <span style=color:#75715e>// 屏幕坐标</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>float</span> scrollDelta = Input.mouseScrollDelta.y; <span style=color:#75715e>// 滚轮滑动</span>
</span></span></code></pre></div><h3 id=触摸屏输入touch>触摸屏输入（Touch）</h3><p>移动端专用，支持多点触控</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cs data-lang=cs><span style=display:flex><span><span style=color:#66d9ef>int</span> count = Input.touchCount;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (count &gt; <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    Touch touch = Input.GetTouch(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    Debug.Log(touch.position); <span style=color:#75715e>// 屏幕坐标</span>
</span></span><span style=display:flex><span>    Debug.Log(touch.phase); <span style=color:#75715e>// Began, Moved, Stationary, Ended, Cancled</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=虚拟轴input-manager>虚拟轴（Input Manager）</h3><p>通过Unity的<code>Project Setting -> Input Manager</code>设置，可实现跨平台控制<br>它允许你用统一的名字来访问不同平台或设备上的输入<br>通过`Input.GetAxis(&ldquo;Horizontal&rdquo;)获取的是一个“横向控制”的抽象值，不需要关心是按了哪个具体按键或移动了哪个摇杆</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cs data-lang=cs><span style=display:flex><span><span style=color:#66d9ef>float</span> h = Input.GetAxis(<span style=color:#e6db74>&#34;Horizontal&#34;</span>); <span style=color:#75715e>// A/D 或 左/右</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>float</span> v = Input.GetAxis(<span style=color:#e6db74>&#34;Vertical&#34;</span>); <span style=color:#75715e>// W/S 或 上/下</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>float</span> raw = Input.GetAxisRaw(<span style=color:#e6db74>&#34;Horizontal&#34;</span>); <span style=color:#75715e>//不经过平滑处理</span>
</span></span></code></pre></div><p>常用默认名称列表</p><table><thead><tr><th>名称</th><th>类型</th><th>默认映射键</th><th>描述</th></tr></thead><tbody><tr><td><code>Horizontal</code></td><td>轴</td><td>A/D 键、←/→键、手柄左摇杆</td><td>左右移动轴，范围 -1 到 1</td></tr><tr><td><code>Vertical</code></td><td>轴</td><td>W/S 键、↑/↓键、手柄左摇杆</td><td>上下移动轴，范围 -1 到 1</td></tr><tr><td><code>Fire1</code></td><td>按钮</td><td>Ctrl、鼠标左键、手柄 A 键</td><td>攻击、射击等</td></tr><tr><td><code>Fire2</code></td><td>按钮</td><td>Alt、鼠标右键、手柄 B 键</td><td>次要攻击、取消</td></tr><tr><td><code>Fire3</code></td><td>按钮</td><td>Shift、鼠标中键、手柄 X 键</td><td>冲刺或特殊技能</td></tr><tr><td><code>Jump</code></td><td>按钮</td><td>空格键、手柄 Y 键</td><td>跳跃</td></tr><tr><td><code>Mouse X</code></td><td>轴</td><td>鼠标横向移动</td><td>相机/视角横向旋转</td></tr><tr><td><code>Mouse Y</code></td><td>轴</td><td>鼠标纵向移动</td><td>相机/视角纵向旋转</td></tr><tr><td><code>Mouse ScrollWheel</code></td><td>轴</td><td>鼠标滚轮上下滚动</td><td>放大缩小、切换武器等</td></tr><tr><td><code>Submit</code></td><td>按钮</td><td>Enter、手柄 A 键</td><td>UI确认</td></tr><tr><td><code>Cancel</code></td><td>按钮</td><td>Escape、手柄 B 键</td><td>UI取消</td></tr></tbody></table><h3 id=手柄支持旧系统的有限支持>手柄支持（旧系统的有限支持）</h3><p>手柄也通过虚拟轴或<code>KeyCode.JoystickButton0</code>等访问，但：</p><ul><li>设备不通用，配置复杂</li><li>不支持手柄热插拔</li><li>不支持多个玩家分开处理</li></ul><h2 id=unity新输入系统input-system-package>Unity新输入系统（Input System Package）</h2><p>Unity为了解决旧系统的局限，引入了新输入系统，是一个模块化、可配置、支持多设备的专业输入方案</p><h3 id=核心概念>核心概念</h3><p><strong>Input System</strong>包
你需要在Unity的Package Manager中安装<code>Input System</code>包</p><p><strong>与旧系统的对比</strong></p><table><thead><tr><th>对比项</th><th>旧系统（Input Manager）</th><th>新系统（Input System）</th></tr></thead><tbody><tr><td>支持设备</td><td>键鼠、手柄（有限）</td><td>键鼠、手柄、触控、移动传感器等</td></tr><tr><td>输入模式</td><td>较为被动，基于轮询</td><td>支持事件、轮询、回调</td></tr><tr><td>自定义操作</td><td>不支持</td><td>强大的 Action Map 系统</td></tr><tr><td>多玩家支持</td><td>手动管理</td><td>内建支持玩家输入分离</td></tr><tr><td>绑定方式</td><td>硬编码字符串</td><td>数据驱动 Asset 绑定</td></tr></tbody></table><h3 id=关键组成>关键组成</h3><p><strong>Input Action（输入动作）</strong><br>核心概念是“输入动作”，它是抽象层，将具体按键与游戏行为解耦<br>例如：Jump动作绑定Space键、Gamepad A键<br>你可以创建一个<code>.inputactions</code>文件来集中管理动作映射</p><p><strong>Action Map</strong><br>是Input Action的集合，例如：</p><ul><li><code>Player</code>：Move、Jump、Fire</li><li><code>UI</code>：Navigate、Click、Cancel</li></ul><p><strong>控制方案</strong>
用于支持不同设备类型的输入方案，如：</p><ul><li>Keyboard&amp;Mouse</li><li>Gamepad</li><li>Touch</li></ul><h3 id=使用流程常规项目>使用流程（常规项目）</h3><ul><li>安装 Input System
打开 Package Manager
安装 Input System 包
Unity 会提示是否启用新的输入系统（可双系统兼容）</li><li>创建 .inputactions 文件
Assets -> Create -> Input Actions
配置 Action Maps、Actions、Bindings</li><li>生成 C# 类
勾选 Generate C# Class
命名生成的类，如 PlayerInputActions.cs</li><li>在代码中使用</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cs data-lang=cs><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PlayerController</span> : MonoBehaviour
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> PlayerInputActions inputActions;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> Awake() =&gt; inputActions = <span style=color:#66d9ef>new</span> PlayerInputActions();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> OnEnable()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        inputActions.Enable();
</span></span><span style=display:flex><span>        inputActions.Player.Jump.performed += OnJump;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> OnDisable()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        inputActions.Disable();
</span></span><span style=display:flex><span>        inputActions.Player.Jump.performed -= OnJump;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> OnJump(InputAction.CallbackContext context) =&gt; Debug.Log(<span style=color:#e6db74>&#34;Jump!&#34;</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=配合playerinput组件>配合PlayerInput组件</h3><p><code>PlayerInput</code>是Unity提供的MonoBehaviour，用于快速接入<code>.inputactions</code>资产，支持：</p><ul><li>自动绑定事件</li><li>自动识别控制器</li><li>支持多玩家分离（Join/Leave）</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cs data-lang=cs><span style=display:flex><span><span style=color:#66d9ef>void</span> OnMove(InputValue <span style=color:#66d9ef>value</span>) =&gt; Vector2 move = <span style=color:#66d9ef>value</span>.Get&lt;Vector2&gt;();
</span></span></code></pre></div><h3 id=事件类型>事件类型</h3><table><thead><tr><th>类型</th><th>描述</th></tr></thead><tbody><tr><td><code>started</code></td><td>按下的那一帧</td></tr><tr><td><code>performed</code></td><td>动作生效（按住、滑动）</td></tr><tr><td><code>canceled</code></td><td>动作取消（松开、停止滑动）</td></tr></tbody></table><h3 id=实用技巧>实用技巧</h3><p><strong>动态绑定</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cs data-lang=cs><span style=display:flex><span>inputActions.Player.Fire.start += ctx =&gt; Shoot();
</span></span></code></pre></div><p><strong>支持UI操作</strong>
Unity的<code>Input System UI Input Module</code>替代源EventSystem，需绑定Input Actions到UI</p><p><strong>多人输入管理</strong></p><ul><li>配合<code>PlayerInputManager</code></li><li>支持热插拔、多设备控制</li></ul></div><nav class=post-nav><a href=/blog/hot-update/ class=hover:underline>pre: Hot Update</a>
<a href=/blog/interface-oriented-design/ class=hover:underline>next: Interface Oriented Design</a></nav></article><aside class=toc><h3>TOC</h3><nav id=TableOfContents><ul><li><ul><li><a href=#unity旧输入系统unityengineinput>Unity旧输入系统（UnityEngine.Input）</a><ul><li><a href=#键盘输入>键盘输入</a></li><li><a href=#鼠标输入>鼠标输入</a></li><li><a href=#触摸屏输入touch>触摸屏输入（Touch）</a></li><li><a href=#虚拟轴input-manager>虚拟轴（Input Manager）</a></li><li><a href=#手柄支持旧系统的有限支持>手柄支持（旧系统的有限支持）</a></li></ul></li><li><a href=#unity新输入系统input-system-package>Unity新输入系统（Input System Package）</a><ul><li><a href=#核心概念>核心概念</a></li><li><a href=#关键组成>关键组成</a></li><li><a href=#使用流程常规项目>使用流程（常规项目）</a></li><li><a href=#配合playerinput组件>配合PlayerInput组件</a></li><li><a href=#事件类型>事件类型</a></li><li><a href=#实用技巧>实用技巧</a></li></ul></li></ul></li></ul></nav></aside><script>document.addEventListener("DOMContentLoaded",()=>{const n=document.querySelectorAll(".single_article h1, .single_article h2, .single_article h3, .single_article h4, .single_article h5, .single_article h6"),e=document.querySelectorAll(".toc a");let t=!1;e.forEach(n=>{n.addEventListener("click",s=>{e.forEach(e=>e.classList.remove("active")),n.classList.add("active"),t=!0,setTimeout(()=>{t=!1},800)})});const s=new IntersectionObserver(n=>{if(t)return;n.forEach(t=>{if(t.isIntersecting){let n=t.target.getAttribute("id");e.forEach(e=>{e.classList.toggle("active",e.getAttribute("href")==="#"+n)})}})},{rootMargin:"-20% 0px -70% 0px",threshold:0});n.forEach(e=>s.observe(e))})</script><footer><div class=container><p>© 2025 Jeff Lee(ljf12825). All rights reserved |
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>Article: CC BY-NC-SA 4.0</a> |
<a href=https://creativecommons.org/licenses/by-sa/4.0/>Content: CC BY-SA 4.0</a> |
<a href=https://opensource.org/licenses/MIT>Code: MIT License</a> |
<a href=/LICENSE.md>Full License</a></p></div></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script><script>document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll('a[href^="http"]').forEach(e=>{e.setAttribute("target","_blank")})})</script></body></html>