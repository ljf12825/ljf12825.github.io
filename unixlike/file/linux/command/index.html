<!doctype html><html lang=en><head><meta name=page-kind content="page"><meta charset=UTF-8><title>linux command</title><link rel=stylesheet href=/css/style.css><link href=https://cdn.jsdelivr.net/npm/prismjs@1/themes/prism-tomorrow.css rel=stylesheet><script defer src=https://cdn.jsdelivr.net/npm/prismjs@1/prism.js></script><script defer src=https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-csharp.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-cpp.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-json.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-bash.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-ini.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-c.min.js></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script><link rel=stylesheet href=/css/blogsingle.css></head><body><header class=site-header><div class=container><div class=terminal-overlay aria-label=terminal-prompt><span id=typed-line></span><span class=cursor>█</span></div></div></header><nav class=topnav><div class=container><ul><li><a href=/unixlike/>★</a></li><li><a href=/unixlike/lab/>Lab</a></li><li><a href=/unixlike/lib/>Lib</a></li><li><a href=/unixlike/file/>File</a></li></ul></div></nav><nav id=star-nav><div id=star-header><span class="title open">>> >> >> Navigation &lt;&lt; &lt;&lt; &lt;&lt;</span>
<span class="title closed">&lt;&lt;&lt;&lt;&lt;&lt;Nav>>>>>></span></div><pre class=ascii>
+——————————————————————————————————————————————————————————————+
|                        <a class=nav-item data-path=/rightbrain/ href=/rightbrain/>RightBrain</a>                            |
|                             |                                |
|                             |     <a class=nav-item data-path=/dotnetandwindows/ href=/dotnetandwindows/>.NET-Windows</a>               |
|                             |    /                           |
|                             |   /                            |
|                             |  /                             |
|                             | /                              |
|                             |/                               |
|      <a class=nav-item data-path=/graphic/ href=/graphic/>Graphic</a> ———————————— <a class=nav-item data-path=/home/ href=/home/>Home</a> ————————————— <a class=nav-item data-path=/framework/ href=/framework/>Framework</a>       |
|                            /|                                |
|                           / |                                |
|                          /  |                                |
|                         /   |                                |
|                        /    |                                |
|                       /     |                                |
|              <a class=nav-item data-path=/unixlike/ href=/unixlike/>Unix-like</a>      |                <a class=nav-item data-path=/project/ href=/project/>Project</a>         |
|                             |                <a class=nav-item data-path=/miscellaneous/ href=/miscellaneous/>Miscellaneous</a>   |
|                          <a class=nav-item data-path=/csbasic/ href=/csbasic/>CSBasic</a>             <a class=nav-item data-path=/ai/ href=/ai/>AI</a>              |
+——————————————————————————————————————————————————————————————+
    </pre></nav><script defer src=/js/star-nav.js></script><script defer src=/js/site.js></script><script defer src=/js/star-active.js></script><div id=ref-window class="float-window open"><div class=float-header><span class="title open">>> >> >> Reference &lt;&lt; &lt;&lt; &lt;&lt;</span>
<span class="title closed">&lt;&lt;&lt;&lt;&lt;&lt;Ref>>>>>></span></div><div class=float-body><div class=ref-list><a href=https://www.mixamo.com/ target=_blank>Mixamo</a> |
<a href=https://opengameart.org/ target=_blank>OpenGameArt</a><p><a href=https://sharplab.io/ target=_blank>SharpLab</a> |
<a href=https://godbolt.org/ target=_blank>Compiler Explorer</a></p><p><a href="https://patorjk.com/software/taag/#p=display&f=Graffiti&t=Type+Something+&x=none&v=4&h=4&w=80&we=false" target=_blank>ASCII Graph Generator</a></p><p><a href=https://mermaid.js.org/ target=_blank>Mermaid</a></p><a href=https://www.vim.org/ target=_blank>Vim</a> | <a href=https://vimdoc.sourceforge.net/ target=_blank>Vim Manual Source</a> |
<a href=https://vimcdoc.sourceforge.net/ target=_blank>Vimcdoc</a> | <a href=https://vimcdoc.sourceforge.net/doc/help.html target=_blank>Vimdoc read online</a><p><a href=https://shields.io/ target=_blank>Shields.io</a></p><p><a href=https://emojidb.org/ target=_blank>EmojiDB</a></p><p><a href=https://cppreference.com/ target=_blank>cppreference</a></p><p><a href=https://gcc.gnu.org/onlinedocs/ target=_blank>GCC Docs</a></p><p><a href=https://clang.llvm.org/docs/ target=_blank>Clang Docs</a></p><p><a href=https://www.boost.org/libraries/ target=_blank>Boost Library Docs</a></p><p><a href=https://learn.microsoft.com/en-us/dotnet/csharp/ target=_blank>Microsoft Learn</a><p><a href=https://www.lua.org/manual/5.4/ target=_blank>Lua 5.4 Reference Manual</a><p><a href=https://docs.unity3d.com/Manual/index.html target=_blank>Unity Manual</a> |
<a href=https://docs.unity3d.com/ScriptReference/index.html target=_blank>Unity API</a></p><p><a href=https://docs.unrealengine.com/ target=_blank>Unreal Engine Docs</a></p><p><a href=https://godotengine.org target=_blank>Godot</a> |
<a href=https://docs.godotengine.org/en/stable/ target=_blank>Godot Docs</a></p><p><a href=https://z-library.sk/ target=_blank>Z-Library</a> : eBook Library</p><p><a href=https://docs.kernel.org/ target=_blank>Linux Kernel Docs</a></p><p><a href=https://www.gnu.org/ target=_blank>GNU</a> : manuals, philosophy, FAQ</p><a href=https://archlinux.org/ target=_blank>ArchLinux</a><p><a href=https://help.ubuntu.com/ target=_blank>Ubuntu Doc</a> |
<a href=https://ubuntu.com/server/docs target=_blank>Ubuntu Server Guide</a></p><p><a href=https://www.vulkan.org/ target=_blank>Vulkan</a> |
<a href=https://docs.vulkan.org/ target=_blank>Vulkan Docs</a></p><p><a href=https://www.opengl.org/ target=_blank>OpenGL</a> |
<a href=https://registry.khronos.org/OpenGL target=_blank>OpenGL API</a> |
<a href=https://www.khronos.org/opengl/wiki/ target=_blank>OpenGL Wiki</a></p><p><a href=https://learn.microsoft.com/en-us/windows/win32/directx target=_blank>DirectX</a></p><p><a href=https://www.realtimerendering.com/ target=_blank>Real-Time Rendering</a></p><p><a href=https://www.pbr-book.org/ target=_blank>Physically Based Rendering</a></p><p><a href=https://www.scratchapixel.com/ target=_blank>Scratchapixel</a></p><p><a href=https://learnopengl.com/ target=_blank>LearnOpenGL</a></p><p><a href=https://raytracing.github.io/ target=_blank>Ray Tracing in One Weekend</a></p><p><a href=https://www.shadertoy.com/ target=_blank>Shadertoy</a></p><p><a href=https://arxiv.org/list/cs.GR/recent target=_blank>arXiv Graphics</a></p><p><a href=https://www.siggraph.org/ target=_blank>SIGGRAPH</a> |
<a href=https://dl.acm.org/conference/siggraph target=_blank>SIGGRAPH Digital Library</a></p><p><a href=https://git-scm.com/ target=_blank>Git</a> |
<a href=https://git-scm.com/doc target=_blank>Docs</a> |
<a href=https://git-scm.com/community target=_blank>Community</a></p></div></div></div><script src=/js/ref-window.js></script><article class=single_article><div class=title>linux command<div class=meta>Update: 2026-01-14</div></div><div class=content><h1 id=command-in-linux>Command in Linux</h1><p>Linux命令系统是基于Shell（常见的有<code>bash</code>, <code>zsh</code>, <code>fish</code>）的交互环境</p><ul><li>命令本质上就是一个程序（可执行文件），比如<code>/bin/ls</code>、<code>/usr/bin/grep</code></li><li>在命令行里输入的东西，Shell负责解析，然后调用相应的程序执行</li></ul><p>所以“命令系统”不是内核强制规定的，而是围绕Unix哲学发展出来的一整套生态：</p><blockquote><p>&ldquo;做一件事，并且把它做好。通过管道组合小工具，完成大任务&rdquo;</p></blockquote><h2 id=命令的组成结构>命令的组成结构</h2><p>在Linux中，一个命令通常由<strong>命令名+选项+参数</strong>组成</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>ls -l /home/user
</span></span></code></pre></div><ul><li><code>ls</code> -> 命令名</li><li><code>-l</code> -> 选项（长列表显示）</li><li><code>/home/user</code> -> 参数（目标目录）</li></ul><p>选项有两种风格</p><ul><li>短选项：<code>-l</code></li><li>长选项：<code>-all</code></li></ul><p>这套风格来自GNU工具链</p><h2 id=命令来源>命令来源</h2><p>终端命令的来源主要来自于以下几个模块</p><ul><li>Shell内置</li><li>GNU工具集</li><li>其他软件</li><li>用户自定义</li></ul><h2 id=bin>/bin</h2><p><code>bin</code>=binary,存放可执行程序（二进制文件）</p><h3 id=存在意义>存在意义</h3><p>系统最小可用，即：<br>在系统刚启动时、还没挂载其他分区时就能用</p><h3 id=bin-usrbin><code>/bin</code>, <code>/usr/bin</code></h3><table><thead><tr><th>目录</th><th>含义</th></tr></thead><tbody><tr><td><code>/bin</code></td><td>启动和救援必须</td></tr><tr><td><code>/usr/bin</code></td><td>普通用户命令</td></tr><tr><td><code>/sbin</code></td><td>管理员命令</td></tr><tr><td><code>/usr/sbin</code></td><td>非关键管理员命令</td></tr></tbody></table><p>在大多数现代发行版中</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>/bin -&gt; /usr/bin
</span></span><span style=display:flex><span>/sbin -&gt; /usr/sbin
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>ls -l /bin
</span></span></code></pre></div><p>可以看到</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>/bin -&gt; usr/bin
</span></span></code></pre></div><p>这被称作<code>usr merge</code>，可以简化目录结构，减少重复，容器/initramfs更干净</p><h3 id=bin中的程序形态>bin中的程序形态</h3><h4 id=1-elf二进制>1. ELF二进制</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>file /bin/ls
</span></span></code></pre></div><p>输出类似</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>ELF 64-bit LSB executable
</span></span></code></pre></div><p>这是编译好的C程序，由内核直接加载执行</p><h4 id=2-shell脚本>2. Shell脚本</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>file /bin/sh
</span></span></code></pre></div><p>可能是</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>symbolic link to dash
</span></span></code></pre></div><p>或</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/sh
</span></span></span></code></pre></div><p>但这并不代表用户可以自己往<code>/bin</code>内放程序<br>这需要root权限，可能破坏系统一致性，还可能导致包管理器冲突<br>正确的做法是\</p><table><thead><tr><th>目的</th><th>位置</th></tr></thead><tbody><tr><td>个人脚本</td><td><code>~/bin</code></td></tr><tr><td>本地工具</td><td><code>/usr/local/bin</code></td></tr><tr><td>系统包</td><td>交给 apt/pacman</td></tr></tbody></table><h3 id=bin中程序的来源>/bin中程序的来源</h3><p><code>/bin</code>不是一个“统一来源”的目录，它是多个软件包 + 多种构建方式的集合</p><p>它大致包含：</p><p>1.GNU coreutils: GNU官方，C语言实现，所有Linux必备
2.Shell相关：来源于不同项目<code>bash</code>,<code>sh</code>,<code>dash</code>,<code>zsh</code>等
3.util-linux：系统工具集
4.发行版自带/历史遗留工具
5.符号链接</p><blockquote><p>bin 是通过PATH找到的</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>echo $PATH
</span></span></code></pre></div><p>常见包含</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>/usr/local/bin:/usr/bin:/bin
</span></span></code></pre></div><p>当敲下<code>ls</code>时，Shell实际做的是</p><p>1.在<code>/usr/local/bin</code>找
2.再<code>/usr/bin</code>
3.再<code>/bin</code></p><h3 id=shell内置命令>Shell内置命令</h3><p>Shell内置命令是指那些直接由Shell提供支持、实现并在Shell环境中执行的命令。它们不依赖于外部可执行文件，而是内建在Shell中。内置命令执行起来非常高效，因为它们不需要启动新的进程来执行任务，直接由Shell解释执行<br>不同的Shell会有不同或额外的命令，下面是<code>bash</code>中的内置命令，可以通过<code>man bash</code>显示Bash的说明书，中有一个专门的章节详细描述来所有内置命令</p><ul><li><code>cd</code>：改变当前工作目录</li><li><code>pwd</code>：打印当前工作目录路径</li><li><code>echo</code>：输出内容</li><li><code>alias</code>：创建命令别名</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>alias ll<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;ls -l&#39;</span>
</span></span></code></pre></div><ul><li><code>unalias</code>：删除命令别名</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>unalias ll
</span></span></code></pre></div><ul><li><code>export</code>：设置或显示环境变量</li><li><code>unset</code>：删除环境变量或Shell变量</li><li><code>env</code>：查看环境变量</li><li><code>set</code>：设置Shell变量和显示当前Shell环境的所有变量</li><li><code>exit</code>：退出Shell或脚本，返回指定的状态码</li><li><code>return</code>：从函数中返回，指定返回值</li><li><code>wait</code>：等待后台进程完成</li><li><code>eval</code>：计算并执行字符串中的命令</li><li><code>trap</code>：设置一个命令，在指定信号时执行</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>trap <span style=color:#e6db74>&#39;echo &#34;Caught signal!&#34;&#39;</span> SIGINT
</span></span></code></pre></div><ul><li><code>if</code>：条件语句</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> condition  <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># commands</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span></code></pre></div><ul><li><code>for</code>：循环语句</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#66d9ef>for</span> i in <span style=color:#f92672>{</span>1..5<span style=color:#f92672>}</span>; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    echo $i
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span></code></pre></div><ul><li><code>while</code>：条件循环语句</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#66d9ef>while</span> <span style=color:#f92672>[</span> condition  <span style=color:#f92672>]</span>; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># commands</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span></code></pre></div><ul><li><code>case</code>：条件判断的另一种形式</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#66d9ef>case</span> $variable in
</span></span><span style=display:flex><span>  pattern1<span style=color:#f92672>)</span> command ;;
</span></span><span style=display:flex><span>  pattern2<span style=color:#f92672>)</span> command ;;
</span></span><span style=display:flex><span>  *<span style=color:#f92672>)</span> command ;;
</span></span><span style=display:flex><span><span style=color:#66d9ef>esac</span>
</span></span></code></pre></div><ul><li><code>continue</code>：跳过当前循环的剩余部分，开始下一次循环</li><li><code>break</code>：跳出循环</li><li><code>bg</code>：将作业放到后台运行</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>bg %1 <span style=color:#75715e># 将作业号为1的任务放入后台</span>
</span></span></code></pre></div><ul><li><code>fg</code>：将后台作业调回到前台</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>fg %1
</span></span></code></pre></div><ul><li><code>jobs</code>：列出当前Shell会话中的作业</li><li><code>kill</code>：发送信号到进程（通常是用来终止进程）</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>kill -9 <span style=color:#ae81ff>1234</span> <span style=color:#75715e># 发送 SIGKILL信号，终止PID 1234的进程</span>
</span></span></code></pre></div><ul><li><code>history</code>：显示命令历史</li><li><code>source</code>或<code>.</code>：执行文件中的命令，通常用于加载脚本</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>source ~/.bashrc
</span></span><span style=display:flex><span>. ~/.bashrc
</span></span></code></pre></div><ul><li><code>type</code>：显示命令的类型（是内置命令，外部命令、函数等）</li><li><code>read</code>：从标准输入读取一行数据</li><li><code>test</code>：检查条件表达式（用于脚本中）</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>test -f file.txt <span style=color:#f92672>&amp;&amp;</span> echo <span style=color:#e6db74>&#34;File exists&#34;</span>
</span></span></code></pre></div><ul><li><code>let</code>：执行算术运算</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>let result<span style=color:#f92672>=</span>5+3
</span></span></code></pre></div><ul><li><code>exec</code>：替换当前Shell进程为指定的命令</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>exec ls -l
</span></span></code></pre></div><h3 id=gun-utilities>GUN Utilities</h3><p>GUN工具集（GNU Utilities）是指GNU项目提供的一整套自由软件开发与系统工具集合，它构成了现代Unix/Linux系统的基础生产力层</p><h4 id=gnu-coreutils>GNU Coreutils</h4><p>GNU Coreutils是GNU最核心的部分，是GNU项目提供的一组最基础、最核心的用户空间命令行工具集合。它定义了一个最小可用的Unix用户空间长什么样。它包含日常必备的基础命令，覆盖三大类</p><ul><li>文件操作类</li><li>文本处理类</li><li>系统操作类</li></ul><h2 id=文件与目录操作>文件与目录操作</h2><h3 id=ls><code>ls</code></h3><p><code>ls</code>(list directory contents)，用于列出目录内容</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>ls <span style=color:#f92672>[</span>options<span style=color:#f92672>]</span> <span style=color:#f92672>[</span>file/directory<span style=color:#f92672>]</span>
</span></span></code></pre></div><h4 id=选项>选项</h4><h5 id=-l><code>-l</code></h5><p>详细列表格式</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> ljf12825 users   <span style=color:#ae81ff>4096</span> Jan <span style=color:#ae81ff>12</span> 20:31 main.cpp
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>1<span style=color:#f92672>]</span>        <span style=color:#f92672>[</span>2<span style=color:#f92672>]</span>  <span style=color:#f92672>[</span>3<span style=color:#f92672>]</span>      <span style=color:#f92672>[</span>4<span style=color:#f92672>]</span>    <span style=color:#f92672>[</span>5<span style=color:#f92672>]</span>     <span style=color:#f92672>[</span>6<span style=color:#f92672>]</span>         <span style=color:#f92672>[</span>7<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>权限与类型 硬链接数  所有者    所属组   大小     时间        文件名
</span></span></code></pre></div><h6 id=文件类型>文件类型</h6><p>第1个字符</p><table><thead><tr><th>字符</th><th>含义</th></tr></thead><tbody><tr><td><code>-</code></td><td>普通文件</td></tr><tr><td><code>d</code></td><td>目录</td></tr><tr><td><code>l</code></td><td>符号链接（软链接）</td></tr><tr><td><code>c</code></td><td>字符设备</td></tr><tr><td><code>b</code></td><td>块设备</td></tr><tr><td><code>p</code></td><td>管道</td></tr><tr><td><code>s</code></td><td>套接字</td></tr></tbody></table><h6 id=权限位>权限位</h6><p>后9个字符</p><ul><li><p>前3位：user</p></li><li><p>中3位：group</p></li><li><p>后3位：others</p></li><li><p><code>r</code>：读</p></li><li><p><code>w</code>：写</p></li><li><p><code>x</code>：执行</p></li><li><p><code>-</code>：无权限</p></li><li><p><code>s</code>：程序执行时临时获得文件所有者权限</p></li><li><p><code>t</code>：常见于<code>/tmp</code>，只能删除自己创建的文件</p></li></ul><hr><ul><li><p><code>h</code>/<code>--human-readable</code>
人性化显示，文件大小用K, M, G表示</p></li><li><p><code>-1</code>
每行显示一个文件</p></li><li><p><code>-m</code>
用逗号分隔显示</p></li><li><p><code>-x</code>
按行排列</p></li><li><p><code>-C</code>
按列排列</p></li><li><p><code>-t</code>
按修改时间排序（最新在前）</p></li><li><p><code>-r</code>
反向排序，与其他参数共同使用</p></li><li><p><code>u</code>
按访问时间排序</p></li><li><p><code>-c</code>
按inode变更时间排序</p></li><li><p><code>--full-time</code>
显示完整时间戳</p></li><li><p><code>-S</code>
按文件大小降序</p></li><li><p><code>X</code>
按扩展名排序</p></li><li><p><code>v</code>
按版本号排序</p></li><li><p><code>U</code>
不排序（按目录顺序）</p></li><li><p><code>-a</code>
显示所有文件，包括隐藏文件（以<code>.</code>开头）</p></li><li><p><code>-A</code>
显示所有文件，但不包括.和..</p></li><li><p><code>-R</code>
递归显示子目录内容</p></li><li><p><code>-d</code>
显示目录本身，而不是内容</p></li><li><p><code>F</code>
添加文件类型标识符，<code>/</code>目录，<code>*</code>可执行文件，<code>@</code>符号连接，<code>|</code>，FIFO（管道），<code>=</code>套接字</p></li><li><p><code>--color=auto</code>
用颜色区分文件类型（默认）</p></li><li><p><code>--color=always</code>
总是显示颜色</p></li><li><p><code>--color=never</code>
不显示颜色</p></li><li><p><code>-i</code>
显示文件inode号</p></li><li><p><code>--author</code>
显示文件作者</p></li><li><p><code>--hide=*.tmp</code>
隐藏tmp文件</p></li><li><p><code>-I</code>/<code>--ignore</code>
排除tmp文件</p></li></ul><hr><h3 id=cd><code>cd</code></h3><p><code>cd</code>(Change Directory)，用于在文件系统的目录之间进行导航</p><p>特殊符号</p><ul><li><code>.</code>表示当前目录（在<code>cd</code>中不常用，常用于其他命令）</li><li><code>..</code>表示父目录</li><li><code>~</code>表示当前用户的主目录</li><li><code>-</code>表示上一次访问的目录（类似“后退”）</li></ul><h3 id=pwd><code>pwd</code></h3><p><code>pwd</code>(Print Working Directory)，用于显示当前所在的目录的完整路径</p><p>参数</p><ul><li><code>-L</code>（默认），显示逻辑路径（解析符号链接）</li><li><code>-P</code>显示物理路径（不解析符号链接）</li></ul><p>为什么需要pwd?</p><ul><li>在多层目录中容易迷失当前位置</li><li>脚本中需要绝对路径来确保操作正确</li><li>排查问题时需要知道执行环境</li></ul><h3 id=mkdir><code>mkdir</code></h3><p><code>mkdir</code>(Make Directory)，用于在系统中创建新的目录</p><h4 id=基本语法>基本语法</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir <span style=color:#f92672>[</span>options<span style=color:#f92672>]</span> directoryname...
</span></span></code></pre></div><h4 id=基本用法>基本用法</h4><ul><li>创建单个目录</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir folder1
</span></span></code></pre></div><ul><li>创建多个目录</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir folder1 folder2 folder3
</span></span></code></pre></div><ul><li>创建带有空格的目录名</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir <span style=color:#e6db74>&#34;my folder&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mkdir <span style=color:#e6db74>&#39;another folder&#39;</span>
</span></span></code></pre></div><ul><li>创建包含特殊字符的目录名</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir folder-with-dash
</span></span><span style=display:flex><span>mkdir folder_with_underscore
</span></span><span style=display:flex><span>mkdir <span style=color:#e6db74>&#34;folder with space&#34;</span>
</span></span></code></pre></div><h4 id=常用选项>常用选项</h4><ul><li><code>-p, --parents</code>：创建多层目录</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir -p dir1/dir2/dir3
</span></span></code></pre></div><p>如果父目录不存在，会自动创建，如果目录存在，不会报错</p><p>一次性创建多层目录结构</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir -p project/<span style=color:#f92672>{</span>src,test,docs,logs<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 创建：project/src, project/test, project/docs, project/logs</span>
</span></span></code></pre></div><ul><li><code>-m, --mode=MODE</code>：设置目录权限</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir -m <span style=color:#ae81ff>755</span> public_dir
</span></span><span style=display:flex><span>mkdir -m <span style=color:#ae81ff>700</span> private_dir
</span></span></code></pre></div><ul><li><code>-v, --verbose</code>：显示创建过程</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir -v new_folder
</span></span><span style=display:flex><span><span style=color:#75715e># 输出：mkdir: create directory &#39;new_folder&#39;</span>
</span></span></code></pre></div><h3 id=rmdir--rm--r><code>rmdir</code> / <code>rm -r</code></h3><ul><li><code>rmdir</code></li></ul><p>删除空目录，空是指，只含<code>.</code>和<code>..</code>，哪怕有任何文件或子目录（即使是隐藏的），都会失败</p><p><code>rmdir</code>存在的意义就是安全性优先，防止误操作</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>rmdir -p a/b/c
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># a/</span>
</span></span><span style=display:flex><span><span style=color:#75715e># |__b/</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#    |__c/</span>
</span></span></code></pre></div><p>删除<code>c</code> -> <code>b</code>变空了删除<code>b</code> -> <code>a</code>变空了删除<code>a</code>，否则停下</p><p><code>rm -r</code>递归删除目录</p><h3 id=cp复制文件或目录><code>cp</code>：复制文件或目录</h3><p><code>cp</code>用来复制文件/目录</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>cp <span style=color:#f92672>[</span>options<span style=color:#f92672>]</span> source destination
</span></span><span style=display:flex><span>cp <span style=color:#f92672>[</span>options<span style=color:#f92672>]</span> source... directory
</span></span></code></pre></div><table><thead><tr><th>情况</th><th>行为</th></tr></thead><tbody><tr><td>目标不存在</td><td>新建</td></tr><tr><td>目标是文件</td><td>覆盖</td></tr><tr><td>目标是目录</td><td>复制到目录里</td></tr></tbody></table><h4 id=options>OPTIONS</h4><h5 id=-r-r-递归复制><code>-r</code>/<code>-R</code> 递归复制</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>cp -r src dst
</span></span></code></pre></div><p>没有这个选项不能复制目录，<code>-r</code>和<code>-R</code>在GNU <code>cp</code>中基本等价<br>会跟随目录结构，不会自动保留元数据</p><h5 id=-a-归档模式><code>-a</code> 归档模式</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>cp -a src dst
</span></span></code></pre></div><p>等价于</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>cp -dR --preserve<span style=color:#f92672>=</span>all
</span></span></code></pre></div><p>会保留以下内容</p><ul><li>权限</li><li>所有者/组</li><li>时间戳</li><li>符号链接（不解引用）</li><li>设备文件、FIFO</li></ul><p>复制目录，90%场景都应该使用<code>-a</code></p><h5 id=-f-i-覆盖行为控制><code>-f</code>/<code>-i</code> 覆盖行为控制</h5><ul><li><code>-f</code> 强制覆盖不提示</li><li><code>-i</code> 覆盖前询问</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>cp -i a b
</span></span><span style=display:flex><span>cp -f a b
</span></span></code></pre></div><h5 id=-d-p-不解引用软连接><code>-d</code>/<code>-P</code> 不解引用软连接</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>cp -d link dst
</span></span></code></pre></div><p>复制的是link本身，而不是link指向的文件</p><h5 id=-l-解引用软连接><code>-L</code> 解引用软连接</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>cp -L link dst
</span></span></code></pre></div><p>复制链接指向的内容，得到的是普通文件</p><h5 id=--preserve><code>--preserve</code></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>cp --preserve<span style=color:#f92672>=</span>mode,ownership,timestamps file dst
</span></span></code></pre></div><p>或</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>cp -p file dst
</span></span></code></pre></div><p>可保留属性</p><table><thead><tr><th>属性</th><th>说明</th></tr></thead><tbody><tr><td>mode</td><td>权限</td></tr><tr><td>ownership</td><td>uid/gid</td></tr><tr><td>timestamps</td><td>时间</td></tr><tr><td>links</td><td>硬链接</td></tr><tr><td>xattr</td><td>扩展属性</td></tr><tr><td>context</td><td>SELinux</td></tr></tbody></table><p><code>-a</code> = 全保留</p><p><code>--no-preserve</code> 不保留</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>cp -a --no-preserve<span style=color:#f92672>=</span>ownership src dst
</span></span></code></pre></div><h5 id=-u-只在更新时复制><code>-u</code> 只在更新时复制</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>cp -u src dst
</span></span></code></pre></div><p>目标不存在或源比目标新时执行</p><h5 id=--remove-destination><code>--remove-destination</code></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>cp --remove-destination src dst
</span></span></code></pre></div><p>先删dst再复制，可避免只读文件覆盖失败</p><h5 id=--sparse><code>--sparse</code></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>cp --sparse<span style=color:#f92672>=</span>always src dst
</span></span></code></pre></div><p>保留空洞</p><h5 id=--reflink><code>--reflink</code></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>cp --reflink-auto a b
</span></span></code></pre></div><ul><li>Btrfs/XFS</li><li>O(1)复制</li><li>写时复制</li></ul><h5 id=-v-显示过程><code>-v</code> 显示过程</h5><h5 id=--parents-将dst作为父目录><code>--parents</code> 将dst作为父目录</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>cp --parents a/b/c.txt dst
</span></span></code></pre></div><p>结果</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-text data-lang=text><span style=display:flex><span>dst/a/b/c.txt
</span></span></code></pre></div><h5 id=cp-vs-rsync><code>cp</code> vs <code>rsync</code></h5><table><thead><tr><th>场景</th><th>推荐</th></tr></thead><tbody><tr><td>简单复制</td><td>cp</td></tr><tr><td>大目录增量</td><td>rsync</td></tr><tr><td>断点续传</td><td>rsync</td></tr><tr><td>网络</td><td>rsync</td></tr><tr><td>保留全部属性</td><td>cp -a / rsync -a</td></tr></tbody></table><h3 id=mv移动或重命名><code>mv</code>：移动或重命名</h3><p><code>mv</code>(move)，用于移动或重命名文件和目录</p><h4 id=基本功能>基本功能</h4><p>1.移动文件/目录：将文件从一个位置移动到另一个位置
2.重命名文件/目录：在原地更改文件/目录名
3.覆盖文件：如果目标文件已存在，默认会覆盖（无警告）</p><h4 id=基本语法-1>基本语法</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>mv <span style=color:#f92672>[</span>options<span style=color:#f92672>]</span> src/dir src/dir
</span></span></code></pre></div><h5 id=选项-1>选项</h5><table><thead><tr><th>选项</th><th>描述</th></tr></thead><tbody><tr><td><code>-i</code></td><td>交互模式，覆盖前询问确认</td></tr><tr><td><code>-f</code></td><td>强制模式，不询问（默认行为）</td></tr><tr><td><code>-n</code></td><td>不覆盖已存在的文件</td></tr><tr><td><code>-u</code></td><td>只移动比目标文件新的文件</td></tr><tr><td><code>-v</code></td><td>详细模式，显示操作过程</td></tr><tr><td><code>-b</code></td><td>覆盖前为目标文件创建备份</td></tr><tr><td><code>-t dir</code></td><td>先将目标目录指定，然后是要移动的文件</td></tr></tbody></table><h4 id=使用>使用</h4><p>1.重命名文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>mv oldfile.txt newfile.txt
</span></span><span style=display:flex><span><span style=color:#75715e># 将 oldfile.txt 重命名为 newfile.txt</span>
</span></span></code></pre></div><p>2.移动单个文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>mv file.txt /home/user/documents/
</span></span><span style=display:flex><span><span style=color:#75715e># 将 file.txt 移动到 documents 目录</span>
</span></span></code></pre></div><p>3.移动多个文件到目录</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>mv file1.txt file2.txt file3.txt /target/directory/
</span></span><span style=display:flex><span><span style=color:#75715e># 将三个文件移动到目标目录</span>
</span></span></code></pre></div><p>4.移动目录</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>mv dir1/ dir2/
</span></span><span style=display:flex><span><span style=color:#75715e># 如果 dir2 不存在：将 dir1 重命名为 dir2</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 如果 dir2 存在：将 dir1 移动到 dir2/ 目录下</span>
</span></span></code></pre></div><p>5.交互模式（避免误覆盖）</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>mv -i source.txt target.txt
</span></span><span style=display:flex><span><span style=color:#75715e># 如果 target.txt 已存在，会询问是否覆盖</span>
</span></span></code></pre></div><p>6.显示移动过程</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>mv -v file.txt /backup/
</span></span><span style=display:flex><span><span style=color:#75715e># 输出：&#39;file.txt&#39; -&gt; &#39;/backup/file.txt&#39;</span>
</span></span></code></pre></div><p>7.不覆盖现有文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>mv -n file.txt existing.txt
</span></span><span style=display:flex><span><span style=color:#75715e># 如果 existing.txt 存在，则不移动/覆盖</span>
</span></span></code></pre></div><p>8.只移动较新的文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>mv -u newfile.txt oldfile.txt
</span></span><span style=display:flex><span><span style=color:#75715e># 只当 newfile.txt 比 oldfile.txt 新时才移动</span>
</span></span></code></pre></div><p>9.覆盖前创建备份</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>mv -b source.txt target.txt
</span></span><span style=display:flex><span><span style=color:#75715e># 如果 target.txt 存在，会先备份为 target.txt~</span>
</span></span></code></pre></div><h3 id=rm删除文件><code>rm</code>：删除文件</h3><p><code>rm</code>(remove)，用于删除文件或目录</p><p><code>rm</code>删除的文件通常无法恢复，不像图形界面会进回收站</p><p>Linux没有回收站，除非特殊配置，删除操作立即生效</p><h4 id=基本语法-2>基本语法</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>rm <span style=color:#f92672>[</span>options<span style=color:#f92672>]</span> file/dir...
</span></span></code></pre></div><h5 id=常用选项-1>常用选项</h5><table><thead><tr><th>选项</th><th>描述</th></tr></thead><tbody><tr><td><code>-f</code></td><td>强制删除，不提示</td></tr><tr><td><code>-r</code>或<code>-R</code></td><td>递归删除（用于目录）</td></tr><tr><td><code>-i</code></td><td>交互模式，删除前询问</td></tr><tr><td><code>-v</code></td><td>显示详细过程</td></tr><tr><td><code>-d</code></td><td>删除空目录</td></tr><tr><td><code>--preserve-root</code></td><td>不删除根目录（默认）</td></tr><tr><td><code>--no-preserve-root</code></td><td>允许删除根目录</td></tr></tbody></table><p><code>rm</code>不是把文件内容清零，而是删除目录项（文件名），减少inode的引用技术，当引用计数为0 -> 数据库可被复用<br><code>rm</code>内部调用<code>unlink()</code>/<code>unlinkat()</code><br><code>rm</code>为什么不提示成功：No news is good news
<code>rm</code>可以删除正在使用的文件，进程仍能访问，文件名消失，程序结束后才真正释放空间</p><h3 id=cat><code>cat</code></h3><p><code>cat</code>(concatenate)，把输入的内容原样输出到标准输出(stdout)</p><h4 id=用法>用法</h4><h5 id=查看文件内容>查看文件内容</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>cat a.txt
</span></span></code></pre></div><p>把<code>a.txt</code>的内容一次性全部输出，不分页，不暂停</p><h5 id=同时查看多个文件>同时查看多个文件</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>cat a.txt b.txt
</span></span></code></pre></div><p>输出顺序</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-text data-lang=text><span style=display:flex><span>a.txt内容
</span></span><span style=display:flex><span>b.txt内容
</span></span></code></pre></div><p>中间不会自动加分隔符</p><h5 id=合并文件>合并文件</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>cat a.txt b.txt &gt; all.txt
</span></span></code></pre></div><ul><li><code>></code>：覆盖</li><li><code>>></code>：追加</li></ul><h4 id=cat与重定向><code>cat</code>与重定向</h4><h5 id=从标准输入读取>从标准输入读取</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>cat
</span></span></code></pre></div><p>然后输入</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-txt data-lang=txt><span style=display:flex><span>hello
</span></span><span style=display:flex><span>world
</span></span></code></pre></div><p>再<code>^D</code>(EOF)<br>终端输出</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-txt data-lang=txt><span style=display:flex><span>hello
</span></span><span style=display:flex><span>world
</span></span></code></pre></div><h5 id=手动创建文件>手动创建文件</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>cat &gt; test.txt
</span></span></code></pre></div><p>输入内容 -> <code>^D</code>结束</p><h5 id=here-document>Here Document</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt; EOF &gt; config.ini
</span></span></span><span style=display:flex><span><span style=color:#e6db74>[server]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>port=8080
</span></span></span><span style=display:flex><span><span style=color:#e6db74>host=127.0.0.1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><p>shell把内容交给cat</p><h4 id=参数>参数</h4><ul><li><code>n</code> 显示行号，所有行</li><li><code>b</code> 只给非空行编号</li><li><code>A</code> 显示不可见字符，<code>$</code>行尾，<code>^I</code>Tab, <code>^M</code>CR</li></ul><p><code>cat</code> 不适合大文件，它会一次全部输出，终端会被卡住</p><p><code>tac</code>,<code>cat</code>的反向，输出方向和cat相反，从文档末尾->文档开头</p><h3 id=moreless><code>more</code>/<code>less</code></h3><p><code>more</code>与<code>less</code>都是用于分页查看文件内容的工具，通常被称为分页器（pagers）</p><table><thead><tr><th>特性</th><th><code>more</code></th><th><code>less</code></th></tr></thead><tbody><tr><td>诞生时间</td><td>1978年</td><td>1984年</td></tr><tr><td>名称含义</td><td>显示更多</td><td>更少即是更多</td></tr><tr><td>向后滚动</td><td>不支持</td><td>支持</td></tr><tr><td>向前搜索</td><td>不支持</td><td>支持</td></tr><tr><td>向后搜索</td><td>不支持</td><td>支持</td></tr><tr><td>行号显示</td><td>有限支持</td><td>支持</td></tr><tr><td>文件内跳转</td><td>有限</td><td>灵活</td></tr><tr><td>查看多个文件</td><td>支持</td><td>支持</td></tr><tr><td>跟随模式</td><td>不支持</td><td>支持</td></tr><tr><td>内存使用</td><td>较少</td><td>较多</td></tr><tr><td>默认位置</td><td>通常默认安装</td><td>更现代的默认</td></tr></tbody></table><p><code>less</code>是<code>more</code>的增强版，现在基本都用<code>less</code></p><h4 id=more><code>more</code></h4><h5 id=基本语法-3>基本语法</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>more <span style=color:#f92672>[</span>options<span style=color:#f92672>]</span> file
</span></span></code></pre></div><h5 id=常用选项-2>常用选项</h5><table><thead><tr><th>选项</th><th>说明</th></tr></thead><tbody><tr><td><code>-d</code></td><td>显示提示信息</td></tr><tr><td><code>-f</code></td><td>不折叠长行</td></tr><tr><td><code>-l</code></td><td>忽略换页符</td></tr><tr><td><code>-p</code></td><td>从指定行开始</td></tr><tr><td><code>-s</code></td><td>将多个空行压缩为一行</td></tr><tr><td><code>+n</code></td><td>从第n行开始显示</td></tr><tr><td><code>+/pattern</code></td><td>从匹配模式的第一行开始</td></tr></tbody></table><h5 id=基本操作>基本操作</h5><table><thead><tr><th>按键</th><th>功能</th></tr></thead><tbody><tr><td><code>空格</code>或<code>f</code></td><td>向下翻一页</td></tr><tr><td><code>Enter</code></td><td>向下翻一行</td></tr><tr><td><code>=</code></td><td>显示当前行号</td></tr><tr><td><code>:f</code></td><td>显示文件名和行号</td></tr><tr><td><code>q</code>或<code>Q</code></td><td>退出</td></tr><tr><td><code>/字符串</code></td><td>向前搜索字符串（有限）</td></tr></tbody></table><h4 id=less><code>less</code></h4><p>Less is more 少即是多，功能比<code>more</code>更多</p><h5 id=基本语法-4>基本语法</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>less <span style=color:#f92672>[</span>options<span style=color:#f92672>]</span> file
</span></span></code></pre></div><h5 id=常用选项-3>常用选项</h5><table><thead><tr><th>选项</th><th>说明</th></tr></thead><tbody><tr><td><code>-N</code></td><td>显示行号</td></tr><tr><td><code>-i</code></td><td>搜索时忽略大小写</td></tr><tr><td><code>-I</code></td><td>搜索时智能忽略大小写</td></tr><tr><td><code>-S</code></td><td>不换行（水平滚动）</td></tr><tr><td><code>-F</code></td><td>如果文件小于一屏，自动退出</td></tr><tr><td><code>-X</code></td><td>退出时不清理屏幕</td></tr><tr><td><code>-R</code></td><td>显示原始控制字符（如颜色）</td></tr><tr><td><code>-M</code></td><td>显示更多提示信息</td></tr><tr><td><code>+/pattern</code></td><td>从匹配模式开始</td></tr><tr><td><code>+G</code></td><td>直接跳转到文件末尾</td></tr></tbody></table><h5 id=操作>操作</h5><h6 id=导航命令>导航命令</h6><table><thead><tr><th>按键</th><th>功能</th></tr></thead><tbody><tr><td><code>空格</code>或<code>f</code></td><td>向前翻一页</td></tr><tr><td><code>b</code></td><td>向后翻一页</td></tr><tr><td><code>u</code></td><td>向后翻半页</td></tr><tr><td><code>Enter</code>或<code>e</code>或<code>j</code></td><td>向前一行</td></tr><tr><td><code>y</code>或<code>k</code></td><td>向后一行</td></tr><tr><td><code>g</code></td><td>跳到文件开头</td></tr><tr><td><code>G</code></td><td>跳到文件末尾</td></tr><tr><td><code>10g</code></td><td>跳到第10行</td></tr><tr><td><code>50%</code></td><td>跳到文件的50%位置</td></tr></tbody></table><h6 id=搜索命令>搜索命令</h6><table><thead><tr><th>按键</th><th>功能</th></tr></thead><tbody><tr><td><code>/pattern</code></td><td>向前搜索匹配模式</td></tr><tr><td><code>?pattern</code></td><td>向后搜索匹配模式</td></tr><tr><td><code>n</code></td><td>重复上一次搜索（同方向）</td></tr><tr><td><code>N</code></td><td>重复上一次搜索（反方向）</td></tr><tr><td><code>&amp;pattern</code></td><td>仅显示匹配的行</td></tr><tr><td><code>Esc+u</code></td><td>关闭高亮显示</td></tr></tbody></table><h6 id=文件操作>文件操作</h6><table><thead><tr><th>按键</th><th>功能</th></tr></thead><tbody><tr><td><code>:e file</code></td><td>打开新文件</td></tr><tr><td><code>:n</code></td><td>查看下一个文件（多文件时）</td></tr><tr><td><code>:p</code></td><td>查看上一个文件（多文件时）</td></tr><tr><td><code>:x</code></td><td>查看第一个文件</td></tr><tr><td><code>h</code></td><td>显示帮助</td></tr><tr><td><code>q</code>或<code>ZZ</code></td><td>退出</td></tr></tbody></table><h6 id=标记和跳转>标记和跳转</h6><table><thead><tr><th>按键</th><th>功能</th></tr></thead><tbody><tr><td><code>mchar</code></td><td>用字母标记当前位置</td></tr><tr><td><code>'char</code></td><td>跳转到标记的位置</td></tr><tr><td><code>''</code></td><td>跳转到上次的位置</td></tr></tbody></table><h6 id=特殊功能>特殊功能</h6><table><thead><tr><th>按键</th><th>功能</th></tr></thead><tbody><tr><td><code>v</code></td><td>用默认编辑器打开当前文件</td></tr><tr><td><code>!command</code></td><td>执行shell命令</td></tr><tr><td><code>s file</code></td><td>保存当前内容到文件</td></tr><tr><td><code>F</code></td><td>跟随模式（实时查看日志，类似<code>tail -f</code></td></tr></tbody></table><h5 id=使用示例>使用示例</h5><p>1.查看文件并显示行号</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>less -N lgofile.txt
</span></span></code></pre></div><p>2.查看压缩文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># less可以直接查看压缩文件</span>
</span></span><span style=display:flex><span>less access.log.gz
</span></span><span style=display:flex><span>less error.log.bz2
</span></span><span style=display:flex><span>zcat file.gz | less <span style=color:#75715e># 替代方法</span>
</span></span></code></pre></div><p>3.实时监控日志（跟随模式）</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>less +F /var/lgo/syslog
</span></span><span style=display:flex><span><span style=color:#75715e># 按 ^C 停止跟随，再按F恢复</span>
</span></span></code></pre></div><p>4.查看命令输出</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 保留颜色输出</span>
</span></span><span style=display:flex><span>ls --color<span style=color:#f92672>=</span>always | less -R
</span></span><span style=display:flex><span>grep --color<span style=color:#f92672>=</span>always <span style=color:#e6db74>&#34;error&#34;</span> log.txt | less -R
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看进程，按内存排序</span>
</span></span><span style=display:flex><span>ps aux --sort<span style=color:#f92672>=</span>-%mem | less
</span></span></code></pre></div><p>5.查看多个文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>less file1.txt file2.txt file3.txt
</span></span><span style=display:flex><span><span style=color:#75715e># 使用 :n 和 :p 在文件间切换</span>
</span></span></code></pre></div><p>6.查看文件特定部分</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 只查看包含&#34;ERROR&#34;的行</span>
</span></span><span style=display:flex><span>less -p ERROR log.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看第100-200行</span>
</span></span><span style=display:flex><span>less +100 -p200 log.txt  <span style=color:#75715e># 从100行开始，显示到200行附近</span>
</span></span></code></pre></div><p>7.在less中执行命令</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 在 less 中按 ! 然后输入命令</span>
</span></span><span style=display:flex><span>!ls -la  <span style=color:#75715e># 查看当前目录，按回车返回less</span>
</span></span></code></pre></div><h4 id=为什么需要分页器>为什么需要分页器</h4><ul><li><code>more</code>几乎不用</li><li><code>less</code>广泛使用</li><li><code>most</code>另一个分页器，功能介于more和less之间</li><li><code>bat</code> 现代替代品，需要安装</li></ul><p>分页器在特定场景下有不可替代的作用</p><ul><li>只读查看</li><li>启动和退出速度快</li><li>可通过管道</li></ul><h3 id=headtail><code>head</code>/<code>tail</code></h3><h4 id=head><code>head</code></h4><p>查看文件开头</p><h5 id=基本用法-1>基本用法</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 查看文件前10行（默认）</span>
</span></span><span style=display:flex><span>head filename.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看指定行数（如5行）</span>
</span></span><span style=display:flex><span>head -n <span style=color:#ae81ff>5</span> filename.txt
</span></span><span style=display:flex><span>head -5 filename.txt <span style=color:#75715e># 简写形式</span>
</span></span></code></pre></div><h5 id=常用选项-4>常用选项</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 查看前100个字节</span>
</span></span><span style=display:flex><span>head -c <span style=color:#ae81ff>100</span> filename.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看前1KB的内容</span>
</span></span><span style=display:flex><span>head -c 1k filename.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看前1MB的内容</span>
</span></span><span style=display:flex><span>head -c 1M filename.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看多个文件</span>
</span></span><span style=display:flex><span>head file1.txt file2.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 显示文件名标题</span>
</span></span><span style=display:flex><span>head -v filename.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 不显示文件名标题（默认多个文件时才显示）</span>
</span></span><span style=display:flex><span>head -q file1.txt file2.txt
</span></span></code></pre></div><h4 id=tail><code>tail</code></h4><p>查看文件结尾</p><h5 id=基本用法-2>基本用法</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-text data-lang=text><span style=display:flex><span># 查看文件最后10行（默认）
</span></span><span style=display:flex><span>tail filename.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># 查看指定行数（如20行）
</span></span><span style=display:flex><span>tail -n 20 filename.txt
</span></span><span style=display:flex><span>tail -20 filename.txt # 简写形式
</span></span></code></pre></div><h5 id=常用选项-5>常用选项</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 实时监控文件变化（日志监控神器）</span>
</span></span><span style=display:flex><span>tail -f /var/log/syslog
</span></span><span style=display:flex><span><span style=color:#75715e># 当文件新增内容时，实时输出</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 监控文件变化，即使文件被重命名或重新创建</span>
</span></span><span style=display:flex><span>tail -F /var/log/app.log
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看最后100个字节</span>
</span></span><span style=display:flex><span>tail -c <span style=color:#ae81ff>100</span> filename.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 从第10行开始显示到文件末尾</span>
</span></span><span style=display:flex><span>tail -n +10 filename.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看最后50行并实时监控</span>
</span></span><span style=display:flex><span>tail -n <span style=color:#ae81ff>50</span> -f access.log
</span></span></code></pre></div><h4 id=示例>示例</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 查看第11-20行（先取前20行，再取最后10行）</span>
</span></span><span style=display:flex><span>head -n <span style=color:#ae81ff>20</span> file.txt | tail -n <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看第5到15行</span>
</span></span><span style=display:flex><span>sed -n <span style=color:#e6db74>&#39;5,15p&#39;</span> file.txt <span style=color:#75715e># 替代方法</span>
</span></span></code></pre></div><h3 id=wc><code>wc</code></h3><p><code>wc</code>(word count) 用来统计输出中的</p><ul><li>行数(lines)</li><li>单词数(words)</li><li>字节数(bytes)</li><li>字符数(chars)</li></ul><p>默认输出三项</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>wc file.txt
</span></span></code></pre></div><p>输出</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-text data-lang=text><span style=display:flex><span> 120     900     6321 file.txt
</span></span><span style=display:flex><span>lines   words   bytes
</span></span></code></pre></div><h4 id=常用参数>常用参数</h4><ul><li><code>-l</code> 行数</li><li><code>-w</code> 单词数</li><li><code>c</code> 字节数</li><li><code>m</code> 字符数（考虑Unicode）</li></ul><p>只看行数</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>wc -l main.cpp
</span></span></code></pre></div><p>同时看多个</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>wc -l -w main.cpp
</span></span></code></pre></div><h4 id=底层本质>底层本质</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>wc -l
</span></span></code></pre></div><p>统计的是换行符<code>\n</code>数量</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>echo <span style=color:#e6db74>&#34;你好&#34;</span> | wc -c <span style=color:#75715e># 7</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;你好&#34;</span> | wc -m <span style=color:#75715e># 3</span>
</span></span></code></pre></div><ul><li><code>-c</code>是UTF-8字节数</li><li><code>-m</code>是实际字符数</li></ul><p><code>wc</code>本质就是一个</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>while</span>(<span style=color:#a6e22e>read</span>(buf)) {
</span></span><span style=display:flex><span>    count <span style=color:#e6db74>&#39;\n&#39;</span>
</span></span><span style=display:flex><span>    count space<span style=color:#f92672>-</span>sep words
</span></span><span style=display:flex><span>    count bytes
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ul><li><p>顺序IO</p></li><li><p>状态机（单词边界判断）</p></li><li><p>时间复杂度：O(n</p></li><li><p>空间复杂度：O(1)</p></li></ul><p>也就是说，<code>wc</code>是最理想的流式算法范例</p><h3 id=grep><code>grep</code></h3><p><code>grep</code>(Global Regular Expression Print)，从文本流中，按规则筛选你想要的行</p><p><code>grep</code>接受两种输入：</p><ol><li>文件参数：grep pattern filename</li><li>标准输入：其他命令的输出</li></ol><p>示例</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>grep <span style=color:#e6db74>&#34;ERROR&#34;</span> server.log
</span></span></code></pre></div><p>在<code>server.log</code>中，找出包含ERROR的所有行</p><h4 id=参数-1>参数</h4><ul><li><code>-i</code> 忽略大小写</li><li><code>-n</code> 显示行号</li><li><code>-v</code> 取反（显示不匹配的行）</li><li><code>-r</code> 递归目录</li><li><code>-l</code> 只显示文件名</li><li><code>-L</code> 只显示不包含匹配项的文件名</li><li><code>-c</code> 统计匹配行数</li><li><code>-E</code> 扩展正则</li><li><code>-F</code> 当作普通字符串（不解析正则）</li><li><code>-w</code> 精确匹配整个单词</li><li><code>-x</code> 精确匹配整行</li><li><code>-o</code> 只显示匹配部分</li><li><code>-h</code> 不显示文件名前缀</li><li><code>-H</code> 显示文件名前缀（默认）</li><li><code>A NUM</code> 显示匹配行后的NUM行</li><li><code>B NUM</code> 显示匹配行前的NUM行</li><li><code>C NUM</code> 显示匹配行先后各NUM行</li></ul><h4 id=grep与正则表达式>grep与正则表达式</h4><p>正则表达式是grep的灵魂</p><h5 id=1-匹配任意一个字符>1. 匹配任意一个字符</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>grep <span style=color:#e6db74>&#34;pla.er&#34;</span> file.txt
</span></span></code></pre></div><p>匹配</p><ul><li>player</li><li>placer</li><li>plaXer</li></ul><h5 id=2-行首行尾>2. 行首/行尾</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>grep <span style=color:#e6db74>&#34;^ERROR&#34;</span> log.txt
</span></span></code></pre></div><p>以ERROR开头</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>grep <span style=color:#e6db74>&#34;failed</span>$<span style=color:#e6db74>&#34;</span> log.txt
</span></span></code></pre></div><p>以failed结尾</p><h5 id=3-数量限定需要-e>3. 数量限定（需要-E）</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>grep -E <span style=color:#e6db74>&#34;a{3,5}&#34;</span> file.txt
</span></span></code></pre></div><p>匹配</p><ul><li>aaa</li><li>aaaa</li><li>aaaaa</li></ul><h5 id=4-或条件>4. 或条件</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>grep -E <span style=color:#e6db74>&#34;ERROR|WARN&#34;</span> log.txt
</span></span></code></pre></div><h4 id=其他>其他</h4><h5 id=1-显示高亮>1. 显示高亮</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>grep --color<span style=color:#f92672>=</span>auto ERROR log.txt
</span></span></code></pre></div><h5 id=2-显示上下文>2. 显示上下文</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>grep -C <span style=color:#ae81ff>3</span> ERROR log.txt
</span></span></code></pre></div><p>显示错误行前后3行</p><h5 id=3-多条件过滤>3. 多条件过滤</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>grep ERROR log.txt | grep timeout
</span></span></code></pre></div><p>等价于：同时包含ERROR和timeout</p><h4 id=底层本质-1>底层本质</h4><p>grep本质是</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>while</span>(<span style=color:#a6e22e>read_line</span>()) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>regex_match</span>(line))
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>print</span>(line);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>关键是</p><ul><li>正则状态机（DFA/NFA）</li><li>流式处理</li><li>不缓存全文件</li></ul><h3 id=touch><code>touch</code></h3><p><code>touch</code>用来创建空文件，或者修改文件的时间戳（时间属性）</p><p>它主要做两件事情</p><ol><li>文件不存在 -> 创建新文件</li><li>文件存在 -> 更新访问时间/修改时间</li></ol><h4 id=常见用法>常见用法</h4><h5 id=创建空文件>创建空文件</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>touch a.txt
</span></span></code></pre></div><p>效果</p><ul><li>如果<code>a.txt</code>不存在 -> 创建一个0字节文件</li><li>如果存在 -> 不改内容，只改时间</li></ul><p>等价于</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>&gt; a.txt
</span></span></code></pre></div><p>但<code>touch</code>更语义化，也更安全</p><h5 id=一次创建多个文件>一次创建多个文件</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>touch a.txt b.txt c.txt
</span></span></code></pre></div><h4 id=时间戳相关>时间戳相关</h4><p>Linux每个文件至少有三个时间</p><table><thead><tr><th>时间</th><th>含义</th></tr></thead><tbody><tr><td>atime</td><td>最后访问时间</td></tr><tr><td>mtime</td><td>最后修改内容时间</td></tr><tr><td>ctime</td><td>最后状态改变时间（权限等）</td></tr></tbody></table><p><code>touch</code>主要影响的是</p><ul><li>atime</li><li>mtime</li></ul><h5 id=1-只改访问时间>1. 只改访问时间</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>touch -a file.txt
</span></span></code></pre></div><h5 id=2-只改修改时间>2. 只改修改时间</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>touch -m file.txt
</span></span></code></pre></div><h5 id=3-设置为指定时间>3. 设置为指定时间</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>touch -t <span style=color:#ae81ff>202401231530</span> file.txt
</span></span></code></pre></div><p>格式</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-fallback data-lang=fallback><span style=display:flex><span>YYYYMMDDhhmm
</span></span></code></pre></div><h6 id=4-对齐另一个文件的时间>4. 对齐另一个文件的时间</h6><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>touch -r source.txt target.txt
</span></span></code></pre></div><p>让<code>target.txt</code>的时间戳=<code>source.txt</code></p><h4 id=本质>本质</h4><p><code>touch</code>就是一次<code>open + utimensat</code>系统调用封装</p><p>核心行为</p><ol><li>如果文件不存在 -> <code>open(0_CREAT)</code></li><li>如果存在 -> <code>utime / utimensat</code> 修改inode时间戳</li></ol><h3 id=diff><code>diff</code></h3><p><code>diff</code>用来比较两个文件（或目录），输出它们之间的差异(difference)</p><h4 id=基本用法-3>基本用法</h4><p>比较两个文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>diff a.txt b.txt
</span></span></code></pre></div><p>输出的是行级别的差异</p><p>a.txt</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-text data-lang=text><span style=display:flex><span>hello
</span></span><span style=display:flex><span>world
</span></span></code></pre></div><p>b.txt</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-text data-lang=text><span style=display:flex><span>hello
</span></span><span style=display:flex><span>linux
</span></span><span style=display:flex><span>world
</span></span></code></pre></div><p>diff输出</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-text data-lang=text><span style=display:flex><span>1a2
</span></span><span style=display:flex><span>&gt; linux
</span></span></code></pre></div><p>意思是：在a.txt的第1行后，增加了一行<code>linux</code></p><h4 id=统一格式>统一格式</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>diff -u a.txt b.txt
</span></span></code></pre></div><p>输出（unified diff）</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-diff data-lang=diff><span style=display:flex><span><span style=color:#f92672>--- a.txt
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>+++ b.txt
</span></span></span><span style=display:flex><span><span style=color:#75715e>@@ -1,2 +1,3 @@
</span></span></span><span style=display:flex><span> hello
</span></span><span style=display:flex><span><span style=color:#a6e22e>+linux
</span></span></span><span style=display:flex><span> world
</span></span></code></pre></div><ul><li><code>--- a.txt</code> 原文件名</li><li><code>+++ b.txt</code> 新文件名</li><li><code>@@ -1,2 +1,3 @@</code> hunk header<ul><li>格式是固定的 <code>@@ -old_start,old_len +new_start,new_len @@</code></li><li><code>-1,2</code> 旧文件：从第1行开始，共2行</li><li><code>+1,3</code> 新文件：从第1行开始，共3行</li></ul></li></ul><p>这就是Git, patch, code review, PR背后统一使用的格式</p><p><code>git diff</code>本质上就是一个高级版的diff + 内部算法 + 语义增强</p><p>输出符号</p><table><thead><tr><th>符号</th><th>含义</th></tr></thead><tbody><tr><td><code>+</code></td><td>新增</td></tr><tr><td><code>-</code></td><td>删除</td></tr><tr><td><code></code></td><td>未变化</td></tr><tr><td><code>@@</code></td><td>变更块位置</td></tr><tr><td><code>---</code></td><td>原文件</td></tr><tr><td><code>+++</code></td><td>新文件</td></tr></tbody></table><h4 id=目录diff>目录diff</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>diff -r dir1 dir2
</span></span></code></pre></div><p>递归比较整个目录树</p><p>比如用于比较两次构建产物差哪了</p><h4 id=参数-2>参数</h4><p>| 参数 | 含义 |
| <code>-u</code> | 统一格式 |
| <code>-r</code> | 递归比较目录 |
| <code>-q</code> | 只告诉你是否不同 |
| <code>-w</code> | 忽略所有空白 |
| <code>-b</code> | 忽略多个空格差异 |
| <code>-B</code> | 忽略空行 |
| <code>-i</code> | 忽略大小写 |
| <code>-I</code> | 忽略匹配行 |</p><h4 id=diff背后的算法>diff背后的算法</h4><p>diff本质是一个经典CS问题：最长公共子序列（LCS）</p><p>给你两行文本</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-text data-lang=text><span style=display:flex><span>A B C D E F
</span></span><span style=display:flex><span>A B X D E Y
</span></span></code></pre></div><p>找最长公共子序列</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-text data-lang=text><span style=display:flex><span>A B D E
</span></span></code></pre></div><p>然后推导出</p><ul><li>C -> X 是修改</li><li>F -> Y 是修改</li></ul><p>这就是diff的数学本质</p><p>Git内部是优化版</p><ul><li>Myers diff algorithm</li><li>O(ND)时间复杂度</li></ul><h2 id=打包压缩>打包压缩</h2><p><a href=~/unix-like/docs/linux/Compress_Archive.md>Compress_Archive</a></p><h2 id=权限与用户>权限与用户</h2><ul><li><code>chmod</code>：修改权限</li><li><code>chown</code>：修改文件所有者</li><li><code>id</code>：查看当前用户信息</li><li><code>whoami</code>：当前登录的用户名</li><li><code>su</code>：切换用户</li><li><code>sudo</code>：以管理员权限执行命令</li><li><code>hostname</code>：显示或设置系统主机名</li><li><code>last</code>：显示用户登录日志</li><li><code>history</code>：显示命令历史记录</li><li><code>passwd</code>：修改用户密码</li><li><code>exit</code>/<code>logout</code>：退出当前登录会话</li><li><code>shutdown</code>：关闭或重启系统</li><li><code>reboot</code>：重启系统</li><li><code>useradd</code>/<code>adduser</code>：添加新用户</li><li><code>usermod</code>：修改用户属性</li><li><code>userdel</code>：删除用户</li></ul><h2 id=系统与进程管理>系统与进程管理</h2><ul><li><code>ps</code>：查看进程</li><li><code>top</code>/<code>htop</code>：实时监控系统资源</li><li><code>kill</code>：终止进程</li><li><code>pkill</code>：按进程名终止进程</li><li><code>bg</code>/<code>fg</code>：将进程置于后台/前台运行</li><li><code>jobs</code>：查看当前后台任务列表</li><li><code>nohup</code>：使进程在用户退出登录后继续运行</li><li><code>df</code>：查看磁盘空间</li><li><code>du</code>：统计目录大小</li><li><code>uptime</code>：系统运行时间</li><li><code>uname</code>：显示系统信息</li><li><code>date</code>：显示或设置系统时间</li><li><code>mount</code>/<code>umount</code>：挂载/卸载文件系统</li></ul><h2 id=输入输出与管道><a href=InputOutputPipelines.md>输入输出与管道</a></h2><h2 id=常用工具命令>常用工具命令</h2><ul><li><code>find</code>：查找文件</li><li><code>sort</code>：排序</li><li><code>uniq</code>：去重</li><li><code>cut</code>：按列截取</li><li><code>xargs</code>：批量传递参数</li><li><code>awk</code>：文本处理利器</li><li><code>sed</code>：流编辑器，做文本替换、删除</li></ul><h2 id=网络相关>网络相关</h2><ul><li><code>ping</code>：测试网络</li><li><code>curl</code>/<code>wget</code>：下载文件、调接口</li><li><code>scp</code>：跨机器复制文件</li><li><code>ssh</code>：远程登录</li><li><code>ifconfig</code>/<code>ip</code>：查看和配置网络接口</li><li><code>netstat</code>：显示网络状态信息</li><li><code>ss</code>：比<code>netstat</code>更快，功能类似</li></ul><h2 id=软件包管理><a href=AdvancedPackageToolSeries.md>软件包管理</a></h2><h2 id=帮助>帮助</h2><ul><li><code>--help</code>：命令自带的帮助<ul><li>定位：命令行内置的简易帮助</li><li>用法：<code>ls--help</code></li><li>特点：<ul><li>内容最短小，直接列出常用参数</li><li>基本上每个GNU命令都会支持</li><li>不需要跳页，结果一屏幕看完，查参数非常快</li></ul></li></ul></li><li><code>man</code>：manual<ul><li>定位：Unix传统命令参考手册</li><li>用法：<code>man ls</code>就能看到<code>ls</code>命令的完整文档</li><li>特点：<ul><li>内容比较标准化，每个命令的介绍基本都包括：NAME、SYNOPSIS、DESCRIPTION、OPTIONS、EXAMPLES</li><li>结构清晰，适合快速查参数</li></ul></li><li>小技巧：<ul><li>翻页：空格（下翻），<code>b</code>（上翻）</li><li>搜索：<code>/关键字</code></li><li>跳出：<code>q</code></li></ul></li></ul></li><li><code>info</code>：GNU info文档<ul><li>定位：GNU项目提供的“扩展手册”，比<code>man</code>更详细</li><li>用法：<code>info ls</code></li><li>特点：<ul><li>支持“超链接”导航，像一本电子书，可以在不同章节间跳转</li><li>内容往往比<code>man</code>全，比如<code>coreutils</code>的命令（<code>ls</code>,<code>cp</code>,<code>mv</code>等）在<code>info</code>里有更完整的介绍和教程感</li></ul></li><li>操作方式：<ul><li><code>n</code>=next（下一章），<code>p</code>=previous（上一章），<code>u</code>=up（回到上层），<code>q</code>=quit</li></ul></li></ul></li></ul><h2 id=命令查看>命令查看</h2><ul><li><code>compgen</code>（在Bash下）<ul><li><code>-c</code>：列出当前Shell能执行的所有命令（内置 + 外部）</li><li><code>-b</code>：列出所有内置命令</li><li><code>-a</code>：列出所有别名</li></ul></li><li><code>ls /bin /usr/bin /usr/local/bin</code>：列出这些目录里的可执行文件（大多数命令就在那里）</li><li><code>which &lt;命令></code>：查看某个命令的真实路径</li></ul></div><nav class=post-nav><a href=/unixlike/file/linux/clipboard/ class=hover:underline>pre: linux clipboard</a>
<a href=/unixlike/file/linux/distributions/ class=hover:underline>next: linux distributions</a></nav></article><aside class=toc><h3>TOC</h3><nav id=TableOfContents><ul><li><a href=#command-in-linux>Command in Linux</a><ul><li><a href=#命令的组成结构>命令的组成结构</a></li><li><a href=#命令来源>命令来源</a></li><li><a href=#bin>/bin</a><ul><li><a href=#存在意义>存在意义</a></li><li><a href=#bin-usrbin><code>/bin</code>, <code>/usr/bin</code></a></li><li><a href=#bin中的程序形态>bin中的程序形态</a><ul><li><a href=#1-elf二进制>1. ELF二进制</a></li><li><a href=#2-shell脚本>2. Shell脚本</a></li></ul></li><li><a href=#bin中程序的来源>/bin中程序的来源</a></li><li><a href=#shell内置命令>Shell内置命令</a></li><li><a href=#gun-utilities>GUN Utilities</a><ul><li><a href=#gnu-coreutils>GNU Coreutils</a></li></ul></li></ul></li><li><a href=#文件与目录操作>文件与目录操作</a><ul><li><a href=#ls><code>ls</code></a><ul><li><a href=#选项>选项</a><ul><li><a href=#-l><code>-l</code></a><ul><li><a href=#文件类型>文件类型</a></li><li><a href=#权限位>权限位</a></li></ul></li></ul></li></ul></li><li><a href=#cd><code>cd</code></a></li><li><a href=#pwd><code>pwd</code></a></li><li><a href=#mkdir><code>mkdir</code></a><ul><li><a href=#基本语法>基本语法</a></li><li><a href=#基本用法>基本用法</a></li><li><a href=#常用选项>常用选项</a></li></ul></li><li><a href=#rmdir--rm--r><code>rmdir</code> / <code>rm -r</code></a></li><li><a href=#cp复制文件或目录><code>cp</code>：复制文件或目录</a><ul><li><a href=#options>OPTIONS</a><ul><li><a href=#-r-r-递归复制><code>-r</code>/<code>-R</code> 递归复制</a></li><li><a href=#-a-归档模式><code>-a</code> 归档模式</a></li><li><a href=#-f-i-覆盖行为控制><code>-f</code>/<code>-i</code> 覆盖行为控制</a></li><li><a href=#-d-p-不解引用软连接><code>-d</code>/<code>-P</code> 不解引用软连接</a></li><li><a href=#-l-解引用软连接><code>-L</code> 解引用软连接</a></li><li><a href=#--preserve><code>--preserve</code></a></li><li><a href=#-u-只在更新时复制><code>-u</code> 只在更新时复制</a></li><li><a href=#--remove-destination><code>--remove-destination</code></a></li><li><a href=#--sparse><code>--sparse</code></a></li><li><a href=#--reflink><code>--reflink</code></a></li><li><a href=#-v-显示过程><code>-v</code> 显示过程</a></li><li><a href=#--parents-将dst作为父目录><code>--parents</code> 将dst作为父目录</a></li><li><a href=#cp-vs-rsync><code>cp</code> vs <code>rsync</code></a></li></ul></li></ul></li><li><a href=#mv移动或重命名><code>mv</code>：移动或重命名</a><ul><li><a href=#基本功能>基本功能</a></li><li><a href=#基本语法-1>基本语法</a><ul><li><a href=#选项-1>选项</a></li></ul></li><li><a href=#使用>使用</a></li></ul></li><li><a href=#rm删除文件><code>rm</code>：删除文件</a><ul><li><a href=#基本语法-2>基本语法</a><ul><li><a href=#常用选项-1>常用选项</a></li></ul></li></ul></li><li><a href=#cat><code>cat</code></a><ul><li><a href=#用法>用法</a><ul><li><a href=#查看文件内容>查看文件内容</a></li><li><a href=#同时查看多个文件>同时查看多个文件</a></li><li><a href=#合并文件>合并文件</a></li></ul></li><li><a href=#cat与重定向><code>cat</code>与重定向</a><ul><li><a href=#从标准输入读取>从标准输入读取</a></li><li><a href=#手动创建文件>手动创建文件</a></li><li><a href=#here-document>Here Document</a></li></ul></li><li><a href=#参数>参数</a></li></ul></li><li><a href=#moreless><code>more</code>/<code>less</code></a><ul><li><a href=#more><code>more</code></a><ul><li><a href=#基本语法-3>基本语法</a></li><li><a href=#常用选项-2>常用选项</a></li><li><a href=#基本操作>基本操作</a></li></ul></li><li><a href=#less><code>less</code></a><ul><li><a href=#基本语法-4>基本语法</a></li><li><a href=#常用选项-3>常用选项</a></li><li><a href=#操作>操作</a><ul><li><a href=#导航命令>导航命令</a></li><li><a href=#搜索命令>搜索命令</a></li><li><a href=#文件操作>文件操作</a></li><li><a href=#标记和跳转>标记和跳转</a></li><li><a href=#特殊功能>特殊功能</a></li></ul></li><li><a href=#使用示例>使用示例</a></li></ul></li><li><a href=#为什么需要分页器>为什么需要分页器</a></li></ul></li><li><a href=#headtail><code>head</code>/<code>tail</code></a><ul><li><a href=#head><code>head</code></a><ul><li><a href=#基本用法-1>基本用法</a></li><li><a href=#常用选项-4>常用选项</a></li></ul></li><li><a href=#tail><code>tail</code></a><ul><li><a href=#基本用法-2>基本用法</a></li><li><a href=#常用选项-5>常用选项</a></li></ul></li><li><a href=#示例>示例</a></li></ul></li><li><a href=#wc><code>wc</code></a><ul><li><a href=#常用参数>常用参数</a></li><li><a href=#底层本质>底层本质</a></li></ul></li><li><a href=#grep><code>grep</code></a><ul><li><a href=#参数-1>参数</a></li><li><a href=#grep与正则表达式>grep与正则表达式</a><ul><li><a href=#1-匹配任意一个字符>1. 匹配任意一个字符</a></li><li><a href=#2-行首行尾>2. 行首/行尾</a></li><li><a href=#3-数量限定需要-e>3. 数量限定（需要-E）</a></li><li><a href=#4-或条件>4. 或条件</a></li></ul></li><li><a href=#其他>其他</a><ul><li><a href=#1-显示高亮>1. 显示高亮</a></li><li><a href=#2-显示上下文>2. 显示上下文</a></li><li><a href=#3-多条件过滤>3. 多条件过滤</a></li></ul></li><li><a href=#底层本质-1>底层本质</a></li></ul></li><li><a href=#touch><code>touch</code></a><ul><li><a href=#常见用法>常见用法</a><ul><li><a href=#创建空文件>创建空文件</a></li><li><a href=#一次创建多个文件>一次创建多个文件</a></li></ul></li><li><a href=#时间戳相关>时间戳相关</a><ul><li><a href=#1-只改访问时间>1. 只改访问时间</a></li><li><a href=#2-只改修改时间>2. 只改修改时间</a></li><li><a href=#3-设置为指定时间>3. 设置为指定时间</a><ul><li><a href=#4-对齐另一个文件的时间>4. 对齐另一个文件的时间</a></li></ul></li></ul></li><li><a href=#本质>本质</a></li></ul></li><li><a href=#diff><code>diff</code></a><ul><li><a href=#基本用法-3>基本用法</a></li><li><a href=#统一格式>统一格式</a></li><li><a href=#目录diff>目录diff</a></li><li><a href=#参数-2>参数</a></li><li><a href=#diff背后的算法>diff背后的算法</a></li></ul></li></ul></li><li><a href=#打包压缩>打包压缩</a></li><li><a href=#权限与用户>权限与用户</a></li><li><a href=#系统与进程管理>系统与进程管理</a></li><li><a href=#输入输出与管道>输入输出与管道</a></li><li><a href=#常用工具命令>常用工具命令</a></li><li><a href=#网络相关>网络相关</a></li><li><a href=#软件包管理>软件包管理</a></li><li><a href=#帮助>帮助</a></li><li><a href=#命令查看>命令查看</a></li></ul></li></ul></nav></aside><script src=/js/scrollspy.js defer></script><script type=module>
  import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";
  mermaid.initialize({ 
    startOnLoad: true, theme: "default" });
</script><footer><div class=container><p>© 2026 Jeff Lee(ljf12825). All rights reserved |
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>Article: CC BY-NC-SA 4.0</a> |
<a href=https://creativecommons.org/licenses/by-sa/4.0/>Content: CC BY-SA 4.0</a> |
<a href=https://opensource.org/licenses/MIT>Code: MIT License</a> |
<a href=/LICENSES.md>Full License</a></p></div></footer></body></html>