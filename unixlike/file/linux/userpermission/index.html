<!doctype html><html lang=en><head><meta name=page-kind content="page"><meta charset=UTF-8><title>user and permission</title><link rel=stylesheet href=/css/style.css><link href=https://cdn.jsdelivr.net/npm/prismjs@1/themes/prism-tomorrow.css rel=stylesheet><script defer src=https://cdn.jsdelivr.net/npm/prismjs@1/prism.js></script><script defer src=https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-csharp.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-cpp.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-json.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-bash.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-ini.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-c.min.js></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script><link rel=stylesheet href=/css/blogsingle.css></head><body><header class=site-header><div class=container><div class=terminal-overlay aria-label=terminal-prompt><span id=typed-line></span><span class=cursor>█</span></div></div></header><nav class=topnav><div class=container><ul><li><a href=/unixlike/>★</a></li><li><a href=/unixlike/lab/>Lab</a></li><li><a href=/unixlike/lib/>Lib</a></li><li><a href=/unixlike/file/>File</a></li></ul></div></nav><nav id=star-nav><div id=star-header><span class="title open">>> >> >> Navigation &lt;&lt; &lt;&lt; &lt;&lt;</span>
<span class="title closed">&lt;&lt;&lt;&lt;&lt;&lt;Nav>>>>>></span></div><pre class=ascii>
+——————————————————————————————————————————————————————————————+
|                        <a class=nav-item data-path=/rightbrain/ href=/rightbrain/>RightBrain</a>                            |
|                             |                                |
|                             |     <a class=nav-item data-path=/dotnetandwindows/ href=/dotnetandwindows/>.NET-Windows</a>               |
|                             |    /                           |
|                             |   /                            |
|                             |  /                             |
|                             | /                              |
|                             |/                               |
|      <a class=nav-item data-path=/graphic/ href=/graphic/>Graphic</a> ———————————— <a class=nav-item data-path=/home/ href=/home/>Home</a> ————————————— <a class=nav-item data-path=/framework/ href=/framework/>Framework</a>       |
|                            /|                                |
|                           / |                                |
|                          /  |                                |
|                         /   |                                |
|                        /    |                                |
|                       /     |                                |
|              <a class=nav-item data-path=/unixlike/ href=/unixlike/>Unix-like</a>      |                <a class=nav-item data-path=/project/ href=/project/>Project</a>         |
|                             |                <a class=nav-item data-path=/miscellaneous/ href=/miscellaneous/>Miscellaneous</a>   |
|                          <a class=nav-item data-path=/csbasic/ href=/csbasic/>CSBasic</a>             <a class=nav-item data-path=/ai/ href=/ai/>AI</a>              |
+——————————————————————————————————————————————————————————————+
    </pre></nav><script defer src=/js/star-nav.js></script><script defer src=/js/site.js></script><script defer src=/js/star-active.js></script><div id=ref-window class="float-window open"><div class=float-header><span class="title open">>> >> >> Reference &lt;&lt; &lt;&lt; &lt;&lt;</span>
<span class="title closed">&lt;&lt;&lt;&lt;&lt;&lt;Ref>>>>>></span></div><div class=float-body><div class=ref-list><a href=https://www.mixamo.com/ target=_blank>Mixamo</a> |
<a href=https://opengameart.org/ target=_blank>OpenGameArt</a><p><a href=https://sharplab.io/ target=_blank>SharpLab</a> |
<a href=https://godbolt.org/ target=_blank>Compiler Explorer</a></p><p><a href="https://patorjk.com/software/taag/#p=display&f=Graffiti&t=Type+Something+&x=none&v=4&h=4&w=80&we=false" target=_blank>ASCII Graph Generator</a></p><p><a href=https://mermaid.js.org/ target=_blank>Mermaid</a></p><a href=https://www.vim.org/ target=_blank>Vim</a> | <a href=https://vimdoc.sourceforge.net/ target=_blank>Vim Manual Source</a> |
<a href=https://vimcdoc.sourceforge.net/ target=_blank>Vimcdoc</a> | <a href=https://vimcdoc.sourceforge.net/doc/help.html target=_blank>Vimdoc read online</a><p><a href=https://shields.io/ target=_blank>Shields.io</a></p><p><a href=https://emojidb.org/ target=_blank>EmojiDB</a></p><p><a href=https://cppreference.com/ target=_blank>cppreference</a></p><p><a href=https://gcc.gnu.org/onlinedocs/ target=_blank>GCC Docs</a></p><p><a href=https://clang.llvm.org/docs/ target=_blank>Clang Docs</a></p><p><a href=https://www.boost.org/libraries/ target=_blank>Boost Library Docs</a></p><p><a href=https://learn.microsoft.com/en-us/dotnet/csharp/ target=_blank>Microsoft Learn</a><p><a href=https://www.lua.org/manual/5.4/ target=_blank>Lua 5.4 Reference Manual</a><p><a href=https://docs.unity3d.com/Manual/index.html target=_blank>Unity Manual</a> |
<a href=https://docs.unity3d.com/ScriptReference/index.html target=_blank>Unity API</a></p><p><a href=https://docs.unrealengine.com/ target=_blank>Unreal Engine Docs</a></p><p><a href=https://godotengine.org target=_blank>Godot</a> |
<a href=https://docs.godotengine.org/en/stable/ target=_blank>Godot Docs</a></p><p><a href=https://z-library.sk/ target=_blank>Z-Library</a> : eBook Library</p><p><a href=https://docs.kernel.org/ target=_blank>Linux Kernel Docs</a></p><p><a href=https://www.gnu.org/ target=_blank>GNU</a> : manuals, philosophy, FAQ</p><a href=https://archlinux.org/ target=_blank>ArchLinux</a><p><a href=https://help.ubuntu.com/ target=_blank>Ubuntu Doc</a> |
<a href=https://ubuntu.com/server/docs target=_blank>Ubuntu Server Guide</a></p><p><a href=https://www.vulkan.org/ target=_blank>Vulkan</a> |
<a href=https://docs.vulkan.org/ target=_blank>Vulkan Docs</a></p><p><a href=https://www.opengl.org/ target=_blank>OpenGL</a> |
<a href=https://registry.khronos.org/OpenGL target=_blank>OpenGL API</a> |
<a href=https://www.khronos.org/opengl/wiki/ target=_blank>OpenGL Wiki</a></p><p><a href=https://learn.microsoft.com/en-us/windows/win32/directx target=_blank>DirectX</a></p><p><a href=https://www.realtimerendering.com/ target=_blank>Real-Time Rendering</a></p><p><a href=https://www.pbr-book.org/ target=_blank>Physically Based Rendering</a></p><p><a href=https://www.scratchapixel.com/ target=_blank>Scratchapixel</a></p><p><a href=https://learnopengl.com/ target=_blank>LearnOpenGL</a></p><p><a href=https://raytracing.github.io/ target=_blank>Ray Tracing in One Weekend</a></p><p><a href=https://www.shadertoy.com/ target=_blank>Shadertoy</a></p><p><a href=https://arxiv.org/list/cs.GR/recent target=_blank>arXiv Graphics</a></p><p><a href=https://www.siggraph.org/ target=_blank>SIGGRAPH</a> |
<a href=https://dl.acm.org/conference/siggraph target=_blank>SIGGRAPH Digital Library</a></p><p><a href=https://git-scm.com/ target=_blank>Git</a> |
<a href=https://git-scm.com/doc target=_blank>Docs</a> |
<a href=https://git-scm.com/community target=_blank>Community</a></p></div></div></div><script src=/js/ref-window.js></script><article class=single_article><div class=title>user and permission<div class=meta>Update: 2026-01-14</div></div><div class=content><h1 id=user--permission>User & Permission</h1><p>Linux核心思想，一切皆文件；在Linux中，几乎所有的资源（普通文件、目录、硬件设备、进程等）都被抽象为“文件”。<br>因此，权限管理本质上就是对文件的访问控制</p><h2 id=用户与用户组>用户与用户组</h2><p>为了进行权限管理，Linux首先需要知道“谁”在访问文件。这就引入了用户和用户组的概念</p><h3 id=用户>用户</h3><p>每个使用系统的人或进程都应该有一个唯一的用户账户</p><ul><li>root用户（超级用户）：系统的最高管理员，UID为0。拥有对整个系统无限制的完全访问权限。日常操作应该避免使用root账户，以免误操作导致系统损坏</li><li>系统用户：通常用于运行系统服务和进程，没有登录权限。如<code>www-data</code>用户用于运行Web服务器</li><li>普通用户：为一般使用者创建的账户，权限受限，只能访问自己的文件和被授权访问的文件</li></ul><h4 id=相关文件>相关文件</h4><ul><li><code>/etc/passwd</code>：存储用户账户信息<ul><li>格式：<code>username:x:UID:GID:description:home_directory:login_shell</code><ul><li><code>username</code>：用户的登录名称</li><li><code>x</code>：存储的是密码的加密哈希值（通常在<code>/etc/shadow</code>文件中</li><li><code>UID</code>：用户的唯一标识符</li><li><code>GID</code>：用户所属的主用户组ID</li><li><code>description</code>：一般包含用户的全名或其他描述信息</li><li><code>home_directory</code>：用户的主目录路径（例如，<code>/home/alice</code></li><li><code>login_shell</code>：用户登录后使用的默认Shell程序（例如，<code>/bin/bash</code>）</li></ul></li></ul></li><li><code>/etc/shadow</code>：存储加密后的用户密码以及相关策略（只有root可读）</li></ul><h3 id=用户组>用户组</h3><p>用户组是用户的集合，主要用于简化权限管理。可以将权限分配给一个组，那么组内的所有成员都会自动获得这些权限。一个用户可以数据多个用户组</p><ul><li>主要组：用户创建文件时，文件的默认属组；通常，用户的主组与用户名相同（例如，<code>alice</code>用户的主组也叫<code>alice</code>）</li><li>附加组：用户可以属于多个附加组。附加组用于扩展用户权限，使得用户可以访问属于其他组的文件</li></ul><h4 id=相关文件-1>相关文件</h4><ul><li><code>/etc/group</code>：存储用户组信息<ul><li>格式：<code>group_name:x:GID:user_list</code><ul><li><code>group_name</code>：组的名称</li><li><code>x</code>：如果组有密码，存储的是加密哈希值（通常为空）</li><li><code>GID</code>：组的唯一标识符</li><li><code>user_list</code>：属于该组的用户列表，用户之间用逗号分隔</li></ul></li></ul></li><li><code>/etc/gshadow</code>：存储关于组密码和成员的加密信息（只有root用户可访问）</li></ul><h3 id=相关命令>相关命令</h3><h4 id=用户管理命令>用户管理命令</h4><h5 id=1-useradd-创建新用户>1. <code>useradd</code>-创建新用户</h5><p>基本语法：<code>useradd [选项] 用户名</code><br>常用选项：</p><ul><li><code>-c "注释"</code>：用户的注释信息，通常是全名</li><li><code>-d /home/目录</code>：指定用户的家目录</li><li><code>-m</code>：如果家目录不存在，则创建它（非常重要）</li><li><code>-s /bin/bash</code>：指定用户的登录Shell</li><li><code>-g 主要组</code>：指定用户的主要组（组名或GID）</li><li><code>-G 附加组</code>：指定用户的附加组（组名或GID），多个组用逗号分隔</li><li><code>-u UID</code>：手动指定用户的UID</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 创建一个名为alice的用户，并自动创建家目录</span>
</span></span><span style=display:flex><span>sudo useradd -m alice 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 创建用户 bob, 指定家目录、注释信息，并设置主要组为 &#39;developers&#39;</span>
</span></span><span style=display:flex><span>sudo useradd -m -d /home/bob_home -c <span style=color:#e6db74>&#34;Bob Smith&#34;</span> -g developers bob 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 创建用户 charlie, 并加入到 &#39;wheel, ftp&#39; 两个附加组中</span>
</span></span><span style=display:flex><span>sudo useradd -m -G wheel,ftp charlie 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 创建系统用户（无家目录，不用于登录），用于运行服务</span>
</span></span><span style=display:flex><span>sudo useradd -r -s /bin/false my_service_user 
</span></span></code></pre></div><h5 id=2-usermod-修改用户属性>2. <code>usermod</code>-修改用户属性</h5><p>基本语法：<code>usermod [选项] 用户名</code><br>常用选项：</p><ul><li><code>-c, -d, -s, -g, -u</code>：与<code>useradd</code>相同，用于修改对应信息</li><li><code>-G 附加组</code>：注意：此选项会覆盖用户当前的附加组列表。使用<code>-aG</code>来追加</li><li><code>-ag 附加组</code>：（追加模式）将用户追加到一个或多个附加组中，不覆盖原有组（最常用）</li><li><code>-L</code>：锁定用户账户，禁止其登录</li><li><code>-U</code>：解锁用户账户</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 将用户 alice 加入到 &#39;sudo&#39; 组（能够使用sudo提权）</span>
</span></span><span style=display:flex><span>sudo usermod -aG sudo alice
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 修改用户bob 的登录Shell为 /bin/zsh </span>
</span></span><span style=display:flex><span>sudo usermod -s /bin/zsh bob 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 锁定用户charlie </span>
</span></span><span style=display:flex><span>sudo usermod -L charlie 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 同时修改用户的主要组和附加组（覆盖式）</span>
</span></span><span style=display:flex><span>sudo usermod -g new_primary_group -G group1,group2 username 
</span></span></code></pre></div><h5 id=3-userdel-删除用户>3. <code>userdel</code>-删除用户</h5><p>基本语法：<code>userdel [选项] 用户名</code><br>常用选项：</p><ul><li><code>-r</code>：删除用户的同时，一并删除其家目录和邮件池</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 删除用户 alice，但保留其家目录</span>
</span></span><span style=display:flex><span>sudo userdel alice 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 彻底删除用户 bob （包括家目录）</span>
</span></span><span style=display:flex><span>sudo userdel -r bob 
</span></span></code></pre></div><h5 id=4-passwd-管理用户密码>4. <code>passwd</code>-管理用户密码</h5><p>基本语法：<code>passwd [选项] [用户名]</code><br>常用用法：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 当前用户修改自己的密码</span>
</span></span><span style=display:flex><span>passwd 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># root用户为指定用户设置密码（无需旧密码）</span>
</span></span><span style=display:flex><span>sudo passwd alice 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 锁定用户密码（禁止登录）</span>
</span></span><span style=display:flex><span>sudo passwd -l alice 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看用户密码状态</span>
</span></span><span style=display:flex><span>sudo passwd -S alice 
</span></span></code></pre></div><h5 id=5-id-查看用户身份信息>5. <code>id</code>-查看用户身份信息</h5><p>基本语法：<code>id[用户名]</code><br>示例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 查看当前用户的信息</span>
</span></span><span style=display:flex><span>id 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看用户 alice 的信息</span>
</span></span><span style=display:flex><span>id alice 
</span></span><span style=display:flex><span><span style=color:#75715e># 输出示例：uid=1001(alice) git=1001(alice) groups=1001(alice),27(sudo)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 这表示 alice 的UID是1001，主要组GID是1001，同时属于 alice 和 sudo 组 </span>
</span></span></code></pre></div><h4 id=用户组管理命令>用户组管理命令</h4><h5 id=1-groupadd-创建新用户组>1. <code>groupadd</code>-创建新用户组</h5><p>基本语法：<code>groupadd [选项] 组名</code><br>常用选项：</p><ul><li><code>-g GID</code>：指定新组的GID</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 创建一个名为 developers 的组</span>
</span></span><span style=display:flex><span>sudo groupadd developers 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 创建一个GID为2000的组</span>
</span></span><span style=display:flex><span>sudo groupadd -g <span style=color:#ae81ff>2000</span> project_team 
</span></span></code></pre></div><h5 id=2-groupmod-修改用户组属性>2. <code>groupmod</code>-修改用户组属性</h5><p>基本语法：<code>groupmod [选项] 组名</code><br>常用选项：</p><ul><li><code>-n 新组名</code>：修改组名</li><li><code>-g 新GID</code>：修改组的GID</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 将组名 developers 改为 engineers</span>
</span></span><span style=display:flex><span>sudo groupmod -n engineers developers 
</span></span></code></pre></div><h5 id=3-groupdel-删除用户组>3. <code>groupdel</code>-删除用户组</h5><p>基本语法：<code>groupdel 组名</code><br>注意：如果该组是某个用户的主要组，则无法删除。必须先修改那些用户的主要组或删除那些用户<br>示例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>sudo groupdel engineers 
</span></span></code></pre></div><h5 id=4-gpasswd-管理组核心命令>4. <code>gpasswd</code>-管理组（核心命令）</h5><p>基本语法：<code>gpasswd [选项] 组名</code><br>常用选项：</p><ul><li><code>-a 用户</code>：将用户添加到组中</li><li><code>-d 用户</code>：将用户从组中移除</li><li><code>-M "用户1,用户2,..."</code>：设置组的成员列表（会覆盖原有成员）</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 将用户 alice 添加到 developers 组</span>
</span></span><span style=display:flex><span>sudo gpasswd -a alice developers
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 将用户 bob 从 developers 组中移除</span>
</span></span><span style=display:flex><span>sudo gpasswd -d bob developers
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 一次性设置 developers 组的成员为 alice 和 charlie </span>
</span></span><span style=display:flex><span>sudo gpasswd -M <span style=color:#e6db74>&#34;alice,charlie&#34;</span> developers 
</span></span></code></pre></div><h4 id=切换与查看命令>切换与查看命令</h4><h5 id=1-su-切换用户>1. <code>su</code>-切换用户</h5><p>基本语法：<code>su [选项] [用户名]</code><br>常用选项：</p><ul><li><code>-</code>或<code>-l</code>或<code>--login</code>：模拟完成登录，会加载目标用户的环境变量</li><li>不指定用户名：默认切换到root</li></ul><p>示例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 切换到 root 用户（不加载root的环境变量，保留原用户环境）</span>
</span></span><span style=display:flex><span>su 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 切换到 root 用户（推荐方式，加载root的环境变量，如PATH）</span>
</span></span><span style=display:flex><span>su - <span style=color:#75715e># 或 su - root </span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 切换到 alice 用户</span>
</span></span><span style=display:flex><span>su - alice 
</span></span></code></pre></div><h5 id=sudo-以超级用户权限执行命令><code>sudo</code>-以超级用户权限执行命令</h5><p>基本语法：<code>sodo [命令]</code><br>核心思想：给受信任的用户临时授予root权限来执行特定命令，所有操作都会被记录<br>相关命令：</p><ul><li><code>sudo -i</code>：类似于<code>su -</code>，启动一个root的交互shell</li><li><code>visudo</code>：安全地编辑<code>/etc/sudoers</code>文件，配置sudo权限</li></ul><h5 id=whoami-我是谁><code>whoami</code>-我是谁</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>whoami 
</span></span><span style=display:flex><span><span style=color:#75715e># 输出：alice</span>
</span></span></code></pre></div><h5 id=groups-查看所属组><code>groups</code>-查看所属组</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 查看当前用户属于哪些组</span>
</span></span><span style=display:flex><span>groups 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看指定用户 alice 属于哪些组</span>
</span></span><span style=display:flex><span>groups alice 
</span></span></code></pre></div><h2 id=文件权限基础>文件权限基础</h2><p>Linux将文件权限分为三组：所有者（user）/ 所属组（group）/其他用户（others）<br>每组有是三个权限位：</p><ul><li><code>r</code>（read）：读取文件内容或列出目录内容</li><li><code>w</code>（write）：修改文件内容或在目录中添加/删除文件</li><li><code>x</code>（execute）：执行文件（如果是程序），或进入目录（如果是目录）</li></ul><p>通过<code>ls -l</code>查看权限，显示为</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>-rwxr-x--- <span style=color:#ae81ff>1</span> user group size date filename 
</span></span></code></pre></div><p>前是个字符即为权限标志，每三个一组，分别对应user, group, others</p><ul><li>文件所有者：可读、可写、可执行</li><li>所属组：可读、可执行</li><li>其他用户：无权访问</li></ul><p>当执行<code>ls -l</code>后，最前面的字符表示文件的类型，而不是权限本身，比如</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>drwxr-xr-x  <span style=color:#ae81ff>2</span> user user <span style=color:#ae81ff>4096</span> Oct <span style=color:#ae81ff>23</span>  folder
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> user user <span style=color:#ae81ff>1024</span> Oct <span style=color:#ae81ff>23</span>  file.txt
</span></span><span style=display:flex><span>lrwxrwxrwx  <span style=color:#ae81ff>1</span> user user   <span style=color:#ae81ff>12</span> Oct <span style=color:#ae81ff>23</span>  link -&gt; /some/path
</span></span></code></pre></div><table><thead><tr><th>符号</th><th>含义</th></tr></thead><tbody><tr><td>d</td><td>目录（directory）</td></tr><tr><td>-</td><td>普通文件（regular file）</td></tr><tr><td>l</td><td>符号链接（symbolic link）</td></tr><tr><td>c</td><td>字符设备（character device, 比如终端、串口）</td></tr><tr><td>b</td><td>块设备（block device, 比如硬盘、U盘）</td></tr><tr><td>p</td><td>管道（pipe）</td></tr><tr><td>s</td><td>套接字（socket）</td></tr></tbody></table><h4 id=权限与文件类型的交互>权限与文件类型的交互</h4><p>不同类型的文件，权限意义略有不同</p><table><thead><tr><th>文件类型</th><th><code>r</code></th><th><code>w</code></th><th><code>x</code></th></tr></thead><tbody><tr><td>普通文件</td><td>读内容</td><td>改内容</td><td>执行</td></tr><tr><td>目录</td><td>列出文件</td><td>新增/删除文件</td><td>进入目录</td></tr><tr><td>设备文件</td><td>允许I/O操作</td><td>允许写入设备</td><td>无意义</td></tr><tr><td>管道/套接字</td><td>允许读</td><td>允许写</td><td>无意义</td></tr></tbody></table><h3 id=权限修改>权限修改</h3><h4 id=chmodchange-mode>chmod(change mode)</h4><p>改变权限，有两种写法：</p><ol><li>符号式</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>chmod u+x file <span style=color:#75715e># 给用户增加执行权限</span>
</span></span><span style=display:flex><span>chmod g-w file <span style=color:#75715e># 移除组写权限</span>
</span></span><span style=display:flex><span>chmod o<span style=color:#f92672>=</span>r file <span style=color:#75715e># 设置其他用户只读</span>
</span></span><span style=display:flex><span>chmod a+x file <span style=color:#75715e># 给所有人加执行权限</span>
</span></span></code></pre></div><ol start=2><li>八进制式
三组权限用三位八进制数字表示：<ul><li>r=4, w=2, x=1</li><li>组合相加得出<ul><li><code>rwx</code>=7</li><li><code>rw-</code>=6</li><li><code>r-x</code>=5</li><li><code>r--</code>=4</li><li><code>-wx</code>=3</li><li><code>-w-</code>=2</li><li><code>--x</code>=1</li></ul></li></ul></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>chmod <span style=color:#ae81ff>755</span> file 
</span></span></code></pre></div><ul><li>user: rwx</li><li>group: r-x</li><li>other: r-x</li></ul><h4 id=chownchange-owner>chown（change owner）</h4><p>改变文件的拥有者</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>sudo chown alice file.text <span style=color:#75715e># 改变所有者</span>
</span></span><span style=display:flex><span>sudo chown alice:developers file <span style=color:#75715e># 同时改组</span>
</span></span></code></pre></div><h4 id=chgrpchange-group>chgrp（change group）</h4><p>单独改组</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>chgrp developers file 
</span></span></code></pre></div><h3 id=特殊权限位>特殊权限位</h3><p>Linux文件权限不止<code>rwx</code>三种，还有三种特殊位用于控制执行时的行为</p><ol><li>setuid（Set User ID）
应用于可执行文件<br>当普通用户执行带setuid位的程序时，程序会以文件所有者的身份运行<br>常用于需要短暂提升权限的系统工具</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>ls -l /usr/bin/passwd 
</span></span><span style=display:flex><span>-rwsr-xr-x <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>54256</span> ...
</span></span></code></pre></div><p><code>rws</code>中的<code>s</code>表示setuid<br>这让用户能修改自己的密码（写入<code>/etc/shadow</code>），而不需要root权限</p><ol start=2><li>setgid（Set Group ID）
有两种作用：</li></ol><ul><li>对可执行文件：程序运行时继承文件所属组</li><li>对目录：新建文件自动继承该目录的组，而不是创建者的组</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>chmod g+s /shared_dir 
</span></span></code></pre></div><p>这样<code>/shared_dir</code>中的所有文件都属于同一组，方便团队协作</p><ol start=3><li>sticky bit
常用于共享目录（如<code>/tmp</code>）<br>表示目录中的文件只有文件所有者或root才能删除</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>chmod +t /tmp 
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>drwxrwxrwt <span style=color:#ae81ff>10</span> root root <span style=color:#ae81ff>4096</span> ...
</span></span></code></pre></div><p>末尾的<code>t</code>表示sticky bit</p><h3 id=文件访问控制列表>文件访问控制列表</h3><p>基础的<code>rwx</code>权限只能针对一个所有者、一个组和其他人，如果需要更精细的控制（例如，让多个不同的用户和组拥有不同的权限），就需要使用ACL</p><ul><li>查看ACL：<code>getfacl filename</code></li><li>设置ACL：<code>setfacl</code></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 为用户david添加读写权限</span>
</span></span><span style=display:flex><span>setfacl -m u:david:rw file.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 为组contractors添加只读权限</span>
</span></span><span style=display:flex><span>setfacl -m g:contractors:r file.txt 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 递归设置ACL给一个目录</span>
</span></span><span style=display:flex><span>setfacl -R -m u:david:rwx /shared_folder/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 移除david的ACL条目</span>
</span></span><span style=display:flex><span>setfacl -x u:david file.txt 
</span></span></code></pre></div><h2 id=umask>umask</h2><p><code>umask</code>（用户文件创建掩码）是一个操作系统（尤其是在类Unix系统中）用于确定新创建文件或目录的默认权限工具。它定义了在文件系统中创建文件或目录时，哪些权限应该被禁用</p><h3 id=umask的作用>umask的作用</h3><p>每次当你创建一个文件或目录时，系统会为其分配一组默认权限。这些默认权限通常为<code>666</code>（文件，表示所有用户都有读取和写入权限）或者<code>777</code>（目录，表示所有用户都有读取、写入和执行权限）。然后，<code>umask</code>会通过屏蔽某些权限来减少这些默认权限</p><p>例如，假设你的<code>umask</code>是<code>022</code>，那么</p><ul><li>对于一个新文件，默认权限是<code>666</code>，而<code>umask</code>会将其屏蔽掉<code>2</code>（即去掉写权限）。所以新文件的权限会是<code>644</code>（所有者可以读写，组和其他人只能读取）</li><li>对于一个新目录，默认权限是<code>777</code>，<code>umask</code>会去掉<code>2</code>（去掉写权限）。所以新目录的权限会是<code>755</code>（所有者可以读写执行，组和其他人只能读和执行）</li></ul><h3 id=查看与设置>查看与设置</h3><ul><li>查看当前<code>umask</code>值</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>$ umask
</span></span><span style=display:flex><span><span style=color:#ae81ff>0022</span>
</span></span></code></pre></div><ul><li>设置<code>umask</code>值</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>umask <span style=color:#ae81ff>0777</span>
</span></span></code></pre></div><p>这将屏蔽所有权限，使新创建的文件和目录没有任何权限</p><h3 id=umask常见值><code>umask</code>常见值</h3><ul><li><code>0000</code>：没有权限被屏蔽，意味着文件或目录将具有默认权限</li><li><code>0222</code>：仅屏蔽写权限，使得其他用户可以读取和执行文件</li><li><code>0777</code>：完全屏蔽所有权限，几乎没有权限可以被赋予</li></ul><p><code>umask</code>是非常有用的，特别是在多用户环境中，确保不同用户对文件的访问权限符合预期</p></div><nav class=post-nav><a href=/unixlike/file/linux/systeminfo/ class=hover:underline>pre: system information</a>
<a href=/unixlike/file/linux/userspace/ class=hover:underline>next: userspace</a></nav></article><aside class=toc><h3>TOC</h3><nav id=TableOfContents><ul><li><a href=#user--permission>User & Permission</a><ul><li><a href=#用户与用户组>用户与用户组</a><ul><li><a href=#用户>用户</a><ul><li><a href=#相关文件>相关文件</a></li></ul></li><li><a href=#用户组>用户组</a><ul><li><a href=#相关文件-1>相关文件</a></li></ul></li><li><a href=#相关命令>相关命令</a><ul><li><a href=#用户管理命令>用户管理命令</a><ul><li><a href=#1-useradd-创建新用户>1. <code>useradd</code>-创建新用户</a></li><li><a href=#2-usermod-修改用户属性>2. <code>usermod</code>-修改用户属性</a></li><li><a href=#3-userdel-删除用户>3. <code>userdel</code>-删除用户</a></li><li><a href=#4-passwd-管理用户密码>4. <code>passwd</code>-管理用户密码</a></li><li><a href=#5-id-查看用户身份信息>5. <code>id</code>-查看用户身份信息</a></li></ul></li><li><a href=#用户组管理命令>用户组管理命令</a><ul><li><a href=#1-groupadd-创建新用户组>1. <code>groupadd</code>-创建新用户组</a></li><li><a href=#2-groupmod-修改用户组属性>2. <code>groupmod</code>-修改用户组属性</a></li><li><a href=#3-groupdel-删除用户组>3. <code>groupdel</code>-删除用户组</a></li><li><a href=#4-gpasswd-管理组核心命令>4. <code>gpasswd</code>-管理组（核心命令）</a></li></ul></li><li><a href=#切换与查看命令>切换与查看命令</a><ul><li><a href=#1-su-切换用户>1. <code>su</code>-切换用户</a></li><li><a href=#sudo-以超级用户权限执行命令><code>sudo</code>-以超级用户权限执行命令</a></li><li><a href=#whoami-我是谁><code>whoami</code>-我是谁</a></li><li><a href=#groups-查看所属组><code>groups</code>-查看所属组</a></li></ul></li></ul></li></ul></li><li><a href=#文件权限基础>文件权限基础</a><ul><li><ul><li><a href=#权限与文件类型的交互>权限与文件类型的交互</a></li></ul></li><li><a href=#权限修改>权限修改</a><ul><li><a href=#chmodchange-mode>chmod(change mode)</a></li><li><a href=#chownchange-owner>chown（change owner）</a></li><li><a href=#chgrpchange-group>chgrp（change group）</a></li></ul></li><li><a href=#特殊权限位>特殊权限位</a></li><li><a href=#文件访问控制列表>文件访问控制列表</a></li></ul></li><li><a href=#umask>umask</a><ul><li><a href=#umask的作用>umask的作用</a></li><li><a href=#查看与设置>查看与设置</a></li><li><a href=#umask常见值><code>umask</code>常见值</a></li></ul></li></ul></li></ul></nav></aside><script src=/js/scrollspy.js defer></script><script type=module>
  import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";
  mermaid.initialize({ 
    startOnLoad: true, theme: "default" });
</script><footer><div class=container><p>© 2026 Jeff Lee(ljf12825). All rights reserved |
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>Article: CC BY-NC-SA 4.0</a> |
<a href=https://creativecommons.org/licenses/by-sa/4.0/>Content: CC BY-SA 4.0</a> |
<a href=https://opensource.org/licenses/MIT>Code: MIT License</a> |
<a href=/LICENSES.md>Full License</a></p></div></footer></body></html>