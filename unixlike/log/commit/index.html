<!doctype html><html lang=en><head><meta name=page-kind content="page"><meta charset=UTF-8><title>commit</title><link rel=stylesheet href=/css/style.css><link href=https://cdn.jsdelivr.net/npm/prismjs@1/themes/prism-tomorrow.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/prismjs@1/prism.js></script><script src=https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-c.min.js></script><script src=https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-cpp.min.js></script><script src=https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-csharp.min.js></script><script src=https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-bash.min.js></script><script src=https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-json.min.js></script><script src=https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-lua.min.js></script><script src=https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-python.min.js></script><script src=https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-rust.min.js></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script><link rel=stylesheet href=/css/logsingle.css></head><body><header class=site-header><div class=container><div class=terminal-overlay aria-label=terminal-prompt><span id=typed-line></span><span class=cursor>█</span></div></div></header><nav class=topnav><div class=container><ul><li><a href=/unixlike/>★</a></li><li><a href=/unixlike/lab/>Lab</a></li><li><a href=/unixlike/log/>Log</a></li><li><a href=/unixlike/file/>File</a></li></ul></div></nav><nav id=star-nav><div id=star-header><span class="title open">>> >> >> Navigation &lt;&lt; &lt;&lt; &lt;&lt;</span>
<span class="title closed">&lt;&lt;&lt;&lt;&lt;&lt;Nav>>>>>></span></div><pre class=ascii>
+——————————————————————————————————————————————————————————————+
|                        <a class=nav-item data-path=/rightbrain/ href=/rightbrain/>RightBrain</a>                            |
|                             |                                |
|                             |     <a class=nav-item data-path=/dotnetandwindows/ href=/dotnetandwindows/>.NET-Windows</a>               |
|                             |    /                           |
|                             |   /                            |
|                             |  /                             |
|                             | /                              |
|                             |/                               |
|      <a class=nav-item data-path=/graphic/ href=/graphic/>Graphic</a> ———————————— <a class=nav-item data-path=/home/ href=/home/>Home</a> ————————————— <a class=nav-item data-path=/runtime/ href=/runtime/>Runtime</a>         |
|                            /|                                |
|                           / |                                |
|                          /  |                                |
|                         /   |       <a class=nav-item data-path=/language/ href=/language/>Language</a>                 |
|                        /    |      /                         |
|                       /     |     /                          |
|              <a class=nav-item data-path=/unixlike/ href=/unixlike/>Unix-like</a>      |    /           <a class=nav-item data-path=/project/ href=/project/>Project</a>         |
|                             |   /            <a class=nav-item data-path=/miscellaneous/ href=/miscellaneous/>Miscellaneous</a>   |
|                        <a class=nav-item data-path=/leftbrain/ href=/leftbrain/>LeftBrain</a>             <a class=nav-item data-path=/ai/ href=/ai/>AI</a>              |
+——————————————————————————————————————————————————————————————+
    </pre></nav><script defer src=/js/star-nav.js></script><script defer src=/js/site.js></script><script defer src=/js/star-active.js></script><div id=ref-window class="float-window open"><div class=float-header><span class="title open">>> >> >> Reference &lt;&lt; &lt;&lt; &lt;&lt;</span>
<span class="title closed">&lt;&lt;&lt;&lt;&lt;&lt;Ref>>>>>></span></div><div class=float-body><div class=ref-list><a href=https://www.mixamo.com/ target=_blank>Mixamo</a> |
<a href=https://opengameart.org/ target=_blank>OpenGameArt</a><p><a href=https://sharplab.io/ target=_blank>SharpLab</a> |
<a href=https://godbolt.org/ target=_blank>Compiler Explorer</a></p><p><a href="https://patorjk.com/software/taag/#p=display&f=Graffiti&t=Type+Something+&x=none&v=4&h=4&w=80&we=false" target=_blank>ASCII Graph Generator</a></p><p><a href=https://mermaid.js.org/ target=_blank>Mermaid</a></p><a href=https://www.vim.org/ target=_blank>Vim</a> | <a href=https://vimdoc.sourceforge.net/ target=_blank>Vim Manual Source</a> |
<a href=https://vimcdoc.sourceforge.net/ target=_blank>Vimcdoc</a> | <a href=https://vimcdoc.sourceforge.net/doc/help.html target=_blank>Vimdoc read online</a><p><a href=https://shields.io/ target=_blank>Shields.io</a></p><p><a href=https://emojidb.org/ target=_blank>EmojiDB</a></p><p><a href=https://cppreference.com/ target=_blank>cppreference</a> |
<a href=https://isocpp.org/ target=_blank>isocpp</a> |
<a href=https://open-std.org target=_blank>open-std</a></p><p><a href=https://cmake.com/ target=_blank>cmake.org</a></p><p><a href=https://llvm.org/ target=_blank>llvm.org</a></p><p><a href=https://www.boost.org/ target=_blank>boost.org</a></p><p><a href=https://learn.microsoft.com/en-us/dotnet/csharp/ target=_blank>Microsoft Learn</a><p><a href=https://www.lua.org/ target=_blank>lua.org</a> |
<a href=https://www.luarocks.org/ target=_blank>luarocks.org</a> |
<a href=https://www.luajit.org/ target=_blank>luajit.org</a></p><p><a href=https://docs.unity3d.com/Manual/index.html target=_blank>Unity Manual</a> |
<a href=https://docs.unity3d.com/ScriptReference/index.html target=_blank>Unity API</a></p><p><a href=https://docs.unrealengine.com/ target=_blank>Unreal Engine Docs</a></p><p><a href=https://godotengine.org target=_blank>Godot</a> |
<a href=https://docs.godotengine.org/en/stable/ target=_blank>Godot Docs</a></p><p><a href=https://z-library.sk/ target=_blank>Z-Library</a></p><p><a href=https://docs.kernel.org/ target=_blank>Linux Kernel Docs</a></p><p><a href=https://www.gnu.org/ target=_blank>GNU</a></p><a href=https://archlinux.org/ target=_blank>ArchLinux</a><p><a href=https://help.ubuntu.com/ target=_blank>Ubuntu Doc</a> |
<a href=https://ubuntu.com/server/docs target=_blank>Ubuntu Server Guide</a></p><p><a href=https://www.vulkan.org/ target=_blank>Vulkan</a> |
<a href=https://docs.vulkan.org/ target=_blank>Vulkan Docs</a></p><p><a href=https://www.opengl.org/ target=_blank>OpenGL</a> |
<a href=https://registry.khronos.org/OpenGL target=_blank>OpenGL API</a> |
<a href=https://www.khronos.org/opengl/wiki/ target=_blank>OpenGL Wiki</a></p><p><a href=https://learn.microsoft.com/en-us/windows/win32/directx target=_blank>DirectX</a></p><p><a href=https://www.realtimerendering.com/ target=_blank>Real-Time Rendering</a></p><p><a href=https://www.pbr-book.org/ target=_blank>Physically Based Rendering</a></p><p><a href=https://www.scratchapixel.com/ target=_blank>Scratchapixel</a></p><p><a href=https://learnopengl.com/ target=_blank>LearnOpenGL</a></p><p><a href=https://raytracing.github.io/ target=_blank>Ray Tracing in One Weekend</a></p><p><a href=https://www.shadertoy.com/ target=_blank>Shadertoy</a></p><p><a href=https://arxiv.org/list/cs.GR/recent target=_blank>arXiv Graphics</a></p><p><a href=https://www.siggraph.org/ target=_blank>SIGGRAPH</a> |
<a href=https://dl.acm.org/conference/siggraph target=_blank>SIGGRAPH Digital Library</a></p><p><a href=https://git-scm.com/ target=_blank>Git</a></p></div></div></div><script src=/js/ref-window.js></script><article class=single_article><div class=title>commit<div class=meta>Modified: 2025-12-31
| Author：ljf12825</div></div><div class=content><p>很多版本管理系统存储的是文件版本之间的差异。而Git存储的是快照<br>在Git里，每次commit会生成一个对象<br>commit = 一次不可变的快照(snapshot) + 元数据 + 父节点指针</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-text data-lang=text><span style=display:flex><span>commit
</span></span><span style=display:flex><span>├── tree   (当前目录结构的快照)
</span></span><span style=display:flex><span>├── parent (上一个 commit)
</span></span><span style=display:flex><span>├── author / committer
</span></span><span style=display:flex><span>├── message
</span></span></code></pre></div><p>这就形成了一条有向无环图(DAG)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-text data-lang=text><span style=display:flex><span>A --- B --- C --- D
</span></span></code></pre></div><p>保存整个项目状态（通过tree + blob 哈希复用实现高效存储）<br>每一次Commit,Git都会保存当前所有被追踪文件的完整状态（实际上使用指针指向现有的文件对象，未修改的文件不会重复存储，只是链接到之前的相同文件）<br>一旦创建，Commit的Hash值（如<code>a1b2c3d</code>）就确定了。任何内容的改动（哪怕是一个空格）都会生成一个全新的Hash值</p><h2 id=基础用法>基础用法</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>git status
</span></span><span style=display:flex><span>git add file.cpp
</span></span><span style=display:flex><span>git commit -m <span style=color:#f1fa8c>&#34;Add basic renderer init&#34;</span>
</span></span></code></pre></div><table><thead><tr><th>区域</th><th>说明</th></tr></thead><tbody><tr><td>工作区</td><td>正在编辑的文件</td></tr><tr><td>暂存区(index)</td><td><code>git add</code>后</td></tr><tr><td>仓库(HEAD)</td><td><code>git commit</code>后</td></tr></tbody></table><p>只能commit暂存区里的内容</p><h2 id=commit-message-规范>commit message 规范</h2><p>良好的提交信息格式能够帮助团队成员快速理解代码变更内容，方便代码审查和版本管理</p><h3 id=典型的commit-message格式>典型的commit message格式</h3><p>一个完整的commit message通常包含三部分：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#ff79c6>&lt;</span>type<span style=color:#ff79c6>&gt;</span>[optional scope]<span style=color:#ff79c6>:</span> <span style=color:#ff79c6>&lt;</span>subject<span style=color:#ff79c6>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[optional body]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[optional footer]
</span></span></code></pre></div><ul><li>type：提交类型，说明改动性质（必填）</li><li>scope：影响范围，标明改动影响的模块或文件（可选）</li><li>subject：简洁描述改动内容，第一行不超过50个字符，且不以句号结尾（必填）</li><li>body：详细说明改动原因、具体内容（可选，换行写）</li><li>footer：备注信息，比如关联的issue，破坏性变更说明（可选）</li></ul><h3 id=常见的type类型>常见的type类型</h3><table><thead><tr><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>feat</td><td>新功能（feature）</td></tr><tr><td>fix</td><td>修复 bug</td></tr><tr><td>docs</td><td>文档（documentation）</td></tr><tr><td>style</td><td>代码格式（不影响代码逻辑，比如空格、分号等）</td></tr><tr><td>refactor</td><td>重构（既不是新增功能，也不是修复 bug）</td></tr><tr><td>perf</td><td>性能优化</td></tr><tr><td>test</td><td>添加测试</td></tr><tr><td>build</td><td>构建过程或辅助工具变动</td></tr><tr><td>ci</td><td>持续集成配置相关变动</td></tr><tr><td>chore</td><td>其他杂项，比如构建流程、依赖管理更新</td></tr><tr><td>revert</td><td>回滚某个提交</td></tr></tbody></table><h3 id=常见footer类型>常见footer类型</h3><h4 id=关联issuepr>关联Issue/PR</h4><p>最常见的用法是说明当前提交解决了哪个问题或者与那个Issue/PR有关</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-nginx data-lang=nginx><span style=display:flex><span><span style=color:#ff79c6>Closes</span> <span style=color:#6272a4>#123
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>Fixes</span> <span style=color:#6272a4>#456
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c>Refs</span> <span style=color:#6272a4>#789
</span></span></span></code></pre></div><ul><li><code>Closes #123</code>：表示这个提交会关闭Issue#123</li><li><code>Fixed #456</code>：功能上修复了该Issue</li><li><code>Refs #789</code>：仅作为引用，提交为未解决该Issue</li></ul><p>这些关键词会被GitHub/GitLab自动识别，合并PR时自动关闭对应issue</p><h4 id=breaking-change>BREAKING CHANGE</h4><p>如果该提交包含破坏性更改（如修改了函数签名、接口参数等），需要在footer明确说明，方便版本发布工具识别并升级主版本号</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span>BREAKING CHANGE:登录接口参数从 username 改为 userName，客户端必须同步更改
</span></span></code></pre></div><p>这通常配合语义化版本发布工具使用</p><h4 id=其他元信息>其他元信息</h4><p>有时也可以在footer写一些团队内部约定的信息</p><h3 id=示例>示例</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-scss data-lang=scss><span style=display:flex><span><span style=color:#ff79c6>feat</span><span style=color:#ff79c6>(</span><span style=color:#ff79c6>login</span><span style=color:#ff79c6>)</span>：<span style=color:#ff79c6>添加了用户登录功能</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>实现用户名密码登录校验</span>，<span style=color:#ff79c6>并添加对应的错误提示</span>。
</span></span><span style=display:flex><span><span style=color:#ff79c6>登录成功后跳转至首页</span>。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>BREAKING</span> <span style=color:#ff79c6>CHANGE</span>：<span style=color:#ff79c6>登录接口参数发生变更</span>，<span style=color:#ff79c6>客户端需更新</span>
</span></span></code></pre></div><h3 id=建议>建议</h3><ul><li>第一行是简短标题，长度最好不要超过50个字符</li><li>第二行空白，分隔标题和正文</li><li>正文详细说明改动的原因、解决的问题、实现方案等</li><li>使用祈使语气（Add,Fix,Change），而不是过去式（Added,Fixed）</li><li>如果修复了某个issue，可以在footer中注明，例如<code>Closes #123</code></li><li>避免无意义的提交信息，如“修改”、“更新”</li></ul><h3 id=其他>其他</h3><ul><li>有些团队会要求在scope中写明模块名，如<code>feat(UI)</code>，帮助区改改动范围</li><li>破坏性变更（BREAKING CHANGE）需要明确写出来</li><li>Git工具<code>git commit</code>支持钩子（commit hooks），可以配合工具（如commitlint）自动校验提交格式</li></ul><h2 id=options>OPTIONS</h2><ul><li><code>-m "msg"</code> 直接写提交信息</li><li><code>-a</code> 跳过add，自动暂存已跟踪文件</li><li><code>--amend</code> 修改上一次提交</li><li><code>--no-edit</code> amend时保留原message</li><li><code>--dry-run</code> 预览将提交什么</li><li><code>-v</code> 显示diff到编辑器</li><li><code>-p</code> 交互式选择hunk</li><li><code>--reuse-message=&lt;hash></code> <code>-C &lt;hash></code> 复用某次commit的message</li><li><code>-c &lt;hash></code> 复用但可编辑</li><li><code>--reset-author</code> 重置作者时间</li><li><code>--fixup &lt;hash></code> 标记为修复某提交</li><li><code>--squash &lt;hash></code> 合并到某提交</li><li><code>--no-verify</code> 跳过hook</li><li><code>--allow-empty</code> 允许空提交</li><li><code>--author="A &lt;a@b.com>"</code> 改作者</li><li><code>--date="2023-01-01"</code> 改时间</li><li><code>--reset-author</code> 用当前用户</li><li><code>--no-gpg-sign</code> 跳过签名</li><li><code>--no-verify</code> 跳过pre-commit</li><li><code>--quiet</code> 安静输出</li><li><code>--short</code> 简短</li></ul></div><nav class=post-nav><a href=/unixlike/log/cmake/ class=hover:underline>pre: CMake</a>
<a href=/unixlike/log/commit-tree/ class=hover:underline>next: commit-tree</a></nav></article><aside class=toc><h3>TOC</h3><nav id=TableOfContents><ul><li><ul><li><a href=#基础用法>基础用法</a></li><li><a href=#commit-message-规范>commit message 规范</a><ul><li><a href=#典型的commit-message格式>典型的commit message格式</a></li><li><a href=#常见的type类型>常见的type类型</a></li><li><a href=#常见footer类型>常见footer类型</a><ul><li><a href=#关联issuepr>关联Issue/PR</a></li><li><a href=#breaking-change>BREAKING CHANGE</a></li><li><a href=#其他元信息>其他元信息</a></li></ul></li><li><a href=#示例>示例</a></li><li><a href=#建议>建议</a></li><li><a href=#其他>其他</a></li></ul></li><li><a href=#options>OPTIONS</a></li></ul></li></ul></nav></aside><script src=/js/scrollspy.js defer></script><script type=module>
  import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";
  mermaid.initialize({ 
    startOnLoad: true, theme: "default" });
</script><footer><div class=container><p>© 2026 Jeff Lee(ljf12825). All rights reserved |
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>Article: CC BY-NC-SA 4.0</a> |
<a href=https://creativecommons.org/licenses/by-sa/4.0/>Content: CC BY-SA 4.0</a> |
<a href=https://opensource.org/licenses/MIT>Code: MIT License</a> |
<a href=/LICENSES.md>Full License</a></p></div></footer></body></html>