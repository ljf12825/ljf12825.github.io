{{ define "head_extra" }}
  {{ if eq .Section "blog" }}
    <link rel="stylesheet" href="{{ "css/blog.css" | relURL }}">
  {{ end }}
{{ end }}

{{ define "main" }}
<div class="blog-container">

  <main class="blog-main">
    <h1 class="page-title">{{ .Title }}</h1>

    <div class="blog-grid">
      {{ range where .Site.RegularPages "Section" "blog" }}
        <a href="{{ .RelPermalink }}" class="blog-card" data-tags="{{ with .Params.tags }}{{ delimit . "|"}}{{ end }}">
          {{ with .Params.image }}
            <img src="{{ . | relURL }}" alt="{{ $.Title }}" class="blog-thumb">
          {{ else }}
            <img src="{{ "images/gamelife.jpg" | relURL }}" alt="{{ $.Title }}" class="blog-thumb">
          {{ end }}

          <div class="blog-content">
            <h2 class="blog-title">{{ .Title }}</h2>

            <div class="blog-meta">
              <span class="date"><b>lastmodify:</b> {{ .Date.Format "2006-01-02" }}</span>
              {{ with .Params.author }}<span class="author"><b>creator:</b> {{ . }}</span>{{ end }}
              <span class="meta-line">
                {{ with .Params.categories }}{{ range $i, $cat := . }}[{{ $cat }}]{{ if lt (add $i 1) (len .) }} {{ end }}{{ end }}{{ end }}
                {{ with .Params.tags }}#{{ delimit . " #" }}{{ end }}
              </span>
            </div>


            <p class="blog-summary">
              {{ with .Params.summary }}{{ . }}{{ else }}{{ .Summary }}{{ end }}
            </p>

            <span class="read-more">ReadMore</span>
          </div>
        </a>
      {{ end }}
    </div>
  </main>

  <aside class="sidebar-right">
    <div class="search-box">
      <input type="text" id="searchInput" placeholder="search title & summaryâ€¦">
    </div>

    <div class="tags-box">
      <h3>Tags</h3>
      <ul id="tagList">
        {{ $blogPages := where .Site.RegularPages "Section" "blog" }}
        {{ $tags := slice }}
        {{ range $blogPages }}
          {{ range .Params.tags }}
            {{ $tags = $tags | append . }}
          {{ end }}
        {{ end }}
        {{ range (uniq $tags | sort) }}
          <li><a href="#" class="tag-link" data-tag="{{ . }}">#{{ . }}</a></li>
        {{ end }}
      </ul>
    </div>

    <div class="categories-box">
      <h3>Categories</h3>
      <ul id="categoryList">
        {{ $blogPages := where .Site.RegularPages "Section" "blog" }}
        {{ $categories := slice }}
        {{ range $blogPages }}
          {{ range .Params.categories }}
            {{ $categories = $categories | append . }}
          {{ end }}
        {{ end }}
        {{ range (uniq $categories | sort) }}
          <li><a href="#" class="category-link" data-category="{{ . }}">[{{ . }}]</a></li>
        {{ end }}
      </ul>
    </div>


  </aside>

</div>

<script defer src="{{ "js/blogfilter.js" | relURL }}"></script>

{{ end }}
